!function(){function t(e,t){for(var i in e){var r=e[i],n=this.input.getAttribute("data-"+i.toLowerCase());"number"==typeof r?this[i]=parseInt(n):r===!1?this[i]=null!==n:r instanceof Function?this[i]=null:this[i]=n,this[i]||0===this[i]||(this[i]=i in t?t[i]:r)}}function r(e,t){return"string"==typeof e?(t||document).querySelector(e):e||null}function n(e,t){return i.call((t||document).querySelectorAll(e))}function a(){n("input.awesomplete").forEach(function(e){new Awesomplete(e)})}var e=function(i,n){var a=this;this.input=r(i),this.input.setAttribute("autocomplete","off"),this.input.setAttribute("aria-autocomplete","list"),n=n||{},t.call(this,{minChars:2,maxItems:10,autoFirst:!1,filter:e.FILTER_CONTAINS,sort:e.SORT_BYLENGTH,item:function(e,t){return r.create("li",{innerHTML:e.replace(RegExp(r.regExpEscape(t.trim()),"gi"),"<mark>$&</mark>"),"aria-selected":"false"})},replace:function(e){this.input.value=e}},n),this.index=-1,this.container=r.create("div",{className:"awesomplete",around:i}),this.ul=r.create("ul",{hidden:"",inside:this.container}),this.status=r.create("span",{className:"visually-hidden",role:"status","aria-live":"assertive","aria-relevant":"additions",inside:this.container}),r.bind(this.input,{input:this.evaluate.bind(this),blur:this.close.bind(this),keydown:function(e){var t=e.keyCode;a.opened&&(13===t&&a.selected?(e.preventDefault(),a.select()):27===t?a.close():(38===t||40===t)&&(e.preventDefault(),a[38===t?"previous":"next"]()))}}),r.bind(this.input.form,{submit:this.close.bind(this)}),r.bind(this.ul,{mousedown:function(e){var t=e.target;if(t!==this){for(;t&&!/li/i.test(t.nodeName);)t=t.parentNode;t&&a.select(t)}}}),this.input.hasAttribute("list")?(this.list="#"+i.getAttribute("list"),i.removeAttribute("list")):this.list=this.input.getAttribute("data-list")||n.list||[],e.all.push(this)};e.prototype={set list(e){Array.isArray(e)?this._list=e:"string"==typeof e&&e.indexOf(",")>-1?this._list=e.split(/\s*,\s*/):(e=r(e),e&&e.children&&(this._list=i.apply(e.children).map(function(e){return e.textContent.trim()}))),document.activeElement===this.input&&this.evaluate()},get selected(){return this.index>-1},get opened(){return this.ul&&null==this.ul.getAttribute("hidden")},close:function(){this.ul.setAttribute("hidden",""),this.index=-1,r.fire(this.input,"awesomplete-close")},open:function(){this.ul.removeAttribute("hidden"),this.autoFirst&&-1===this.index&&this["goto"](0),r.fire(this.input,"awesomplete-open")},next:function(){var e=this.ul.children.length;this["goto"](this.index<e-1?this.index+1:-1)},previous:function(){var e=this.ul.children.length;this["goto"](this.selected?this.index-1:e-1)},"goto":function(e){var t=this.ul.children;this.selected&&t[this.index].setAttribute("aria-selected","false"),this.index=e,e>-1&&t.length>0&&(t[e].setAttribute("aria-selected","true"),this.status.textContent=t[e].textContent),r.fire(this.input,"awesomplete-highlight")},select:function(e){if(e=e||this.ul.children[this.index]){var t;r.fire(this.input,"awesomplete-select",{text:e.textContent,preventDefault:function(){t=!0}}),t||(this.replace(e.textContent),this.close(),r.fire(this.input,"awesomplete-selectcomplete"))}},evaluate:function(){var e=this,t=this.input.value;t.length>=this.minChars&&this._list.length>0?(this.index=-1,this.ul.innerHTML="",this._list.filter(function(i){return e.filter(i,t)}).sort(this.sort).every(function(i,r){return e.ul.appendChild(e.item(i,t)),r<e.maxItems-1}),0===this.ul.children.length?this.close():this.open()):this.close()}},e.all=[],e.FILTER_CONTAINS=function(e,t){return RegExp(r.regExpEscape(t.trim()),"i").test(e)},e.FILTER_STARTSWITH=function(e,t){return RegExp("^"+r.regExpEscape(t.trim()),"i").test(e)},e.SORT_BYLENGTH=function(e,t){return e.length!==t.length?e.length-t.length:t>e?-1:1};var i=Array.prototype.slice;return r.create=function(e,t){var i=document.createElement(e);for(var n in t){var a=t[n];if("inside"===n)r(a).appendChild(i);else if("around"===n){var s=r(a);s.parentNode.insertBefore(i,s),i.appendChild(s)}else n in i?i[n]=a:i.setAttribute(n,a)}return i},r.bind=function(e,t){if(e)for(var i in t){var r=t[i];i.split(/\s+/).forEach(function(t){e.addEventListener(t,r)})}},r.fire=function(e,t,i){var r=document.createEvent("HTMLEvents");r.initEvent(t,!0,!0);for(var n in i)r[n]=i[n];e.dispatchEvent(r)},r.regExpEscape=function(e){return e.replace(/[-\\^$*+?.()|[\]{}]/g,"\\$&")},"undefined"!=typeof Document&&("loading"!==document.readyState?a():document.addEventListener("DOMContentLoaded",a)),e.$=r,e.$$=n,"undefined"!=typeof self&&(self.Awesomplete=e),"object"==typeof exports&&(module.exports=e),e}();
