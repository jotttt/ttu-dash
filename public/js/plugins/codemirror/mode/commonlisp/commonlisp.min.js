!function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";e.defineMode("commonlisp",function(e){function a(e){for(var t;t=e.next();)if("\\"==t)e.next();else if(!r.test(t)){e.backUp(1);break}return e.current()}function s(e,t){if(e.eatSpace())return n="ws",null;if(e.match(i))return"number";var r=e.next();if("\\"==r&&(r=e.next()),'"'==r)return(t.tokenize=o)(e,t);if("("==r)return n="open","bracket";if(")"==r||"]"==r)return n="close","bracket";if(";"==r)return e.skipToEnd(),n="ws","comment";if(/['`,@]/.test(r))return null;if("|"==r)return e.skipTo("|")?(e.next(),"symbol"):(e.skipToEnd(),"error");if("#"==r){var r=e.next();return"["==r?(n="open","bracket"):/[+\-=\.']/.test(r)?null:/\d/.test(r)&&e.match(/^\d*#/)?null:"|"==r?(t.tokenize=l)(e,t):":"==r?(a(e),"meta"):"error"}var s=a(e);return"."==s?null:(n="symbol","nil"==s||"t"==s?"atom":":"==s.charAt(0)?"keyword":"&"==s.charAt(0)?"variable-2":"variable")}function o(e,t){for(var r,i=!1;r=e.next();){if('"'==r&&!i){t.tokenize=s;break}i=!i&&"\\"==r}return"string"}function l(e,t){for(var i,r;i=e.next();){if("#"==i&&"|"==r){t.tokenize=s;break}r=i}return n="ws","comment"}var n,t=/^with|^def|^do|^prog|case$|^cond$|bind$|when$|unless$/,i=/^(?:[+\-]?(?:\d+|\d*\.\d+)(?:[efd][+\-]?\d+)?|[+\-]?\d+(?:\/[+\-]?\d+)?|#b[+\-]?[01]+|#o[+\-]?[0-7]+|#x[+\-]?[\da-f]+)/,r=/[^\s'`,@()\[\]";]/;return{startState:function(){return{ctx:{prev:null,start:0,indentTo:0},tokenize:s}},token:function(i,r){i.sol()&&"number"!=typeof r.ctx.indentTo&&(r.ctx.indentTo=r.ctx.start+1),n=null;var a=r.tokenize(i,r);return"ws"!=n&&(null==r.ctx.indentTo?"symbol"==n&&t.test(i.current())?r.ctx.indentTo=r.ctx.start+e.indentUnit:r.ctx.indentTo="next":"next"==r.ctx.indentTo&&(r.ctx.indentTo=i.column())),"open"==n?r.ctx={prev:r.ctx,start:i.column(),indentTo:null}:"close"==n&&(r.ctx=r.ctx.prev||r.ctx),a},indent:function(e,t){var i=e.ctx.indentTo;return"number"==typeof i?i:e.ctx.start+1},lineComment:";;",blockCommentStart:"#|",blockCommentEnd:"|#"}}),e.defineMIME("text/x-common-lisp","commonlisp")});
