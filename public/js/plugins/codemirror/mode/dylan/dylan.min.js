!function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";e.defineMode("dylan",function(e){function c(e,t,i){return t.tokenize=i,i(e,t)}function h(e,t,i){return f=e,d=i,t}function p(e,t){var i=e.peek();if("'"==i||'"'==i)return e.next(),c(e,t,y(i,"string","string"));if("/"==i)return e.next(),e.eat("*")?c(e,t,m):e.eat("/")?(e.skipToEnd(),h("comment","comment")):(e.skipTo(" "),h("operator","operator"));if(/\d/.test(i))return e.match(/^\d*(?:\.\d*)?(?:e[+\-]?\d+)?/),h("number","number");if("#"==i)return e.next(),i=e.peek(),'"'==i?(e.next(),c(e,t,y('"',"symbol","string-2"))):"b"==i?(e.next(),e.eatWhile(/[01]/),h("number","number")):"x"==i?(e.next(),e.eatWhile(/[\da-f]/i),h("number","number")):"o"==i?(e.next(),e.eatWhile(/[0-7]/),h("number","number")):(e.eatWhile(/[-a-zA-Z]/),h("hash","keyword"));if(e.match("end"))return h("end","keyword");for(var o in n)if(n.hasOwnProperty(o)){var s=n[o];if(s instanceof Array&&s.some(function(t){return e.match(t)})||e.match(s))return h(o,a[o],e.current())}return e.match("define")?h("definition","def"):(e.eatWhile(/[\w\-]/),l[e.current()]?h(l[e.current()],u[e.current()],e.current()):e.current().match(r)?h("variable","variable"):(e.next(),h("other","variable-2")))}function m(e,t){for(var r,i=!1;r=e.next();){if("/"==r&&i){t.tokenize=p;break}i="*"==r}return h("comment","comment")}function y(e,t,i){return function(r,n){for(var a,o=!1;null!=(a=r.next());)if(a==e){o=!0;break}return o&&(n.tokenize=p),h(t,i)}}var t={unnamedDefinition:["interface"],namedDefinition:["module","library","macro","C-struct","C-union","C-function","C-callable-wrapper"],typeParameterizedDefinition:["class","C-subtype","C-mapped-subtype"],otherParameterizedDefinition:["method","function","C-variable","C-address"],constantSimpleDefinition:["constant"],variableSimpleDefinition:["variable"],otherSimpleDefinition:["generic","domain","C-pointer-type","table"],statement:["if","block","begin","method","case","for","select","when","unless","until","while","iterate","profiling","dynamic-bind"],separator:["finally","exception","cleanup","else","elseif","afterwards"],other:["above","below","by","from","handler","in","instance","let","local","otherwise","slot","subclass","then","to","keyed-by","virtual"],signalingCalls:["signal","error","cerror","break","check-type","abort"]};t.otherDefinition=t.unnamedDefinition.concat(t.namedDefinition).concat(t.otherParameterizedDefinition),t.definition=t.typeParameterizedDefinition.concat(t.otherDefinition),t.parameterizedDefinition=t.typeParameterizedDefinition.concat(t.otherParameterizedDefinition),t.simpleDefinition=t.constantSimpleDefinition.concat(t.variableSimpleDefinition).concat(t.otherSimpleDefinition),t.keyword=t.statement.concat(t.separator).concat(t.other);var i="[-_a-zA-Z?!*@<>$%]+",r=new RegExp("^"+i),n={symbolKeyword:i+":",symbolClass:"<"+i+">",symbolGlobal:"\\*"+i+"\\*",symbolConstant:"\\$"+i},a={symbolKeyword:"atom",symbolClass:"tag",symbolGlobal:"variable-2",symbolConstant:"variable-3"};for(var o in n)n.hasOwnProperty(o)&&(n[o]=new RegExp("^"+n[o]));n.keyword=[/^with(?:out)?-[-_a-zA-Z?!*@<>$%]+/];var s={};s.keyword="keyword",s.definition="def",s.simpleDefinition="def",s.signalingCalls="builtin";var l={},u={};["keyword","definition","simpleDefinition","signalingCalls"].forEach(function(e){t[e].forEach(function(t){l[t]=e,u[t]=s[e]})});var f,d;return{startState:function(){return{tokenize:p,currentIndent:0}},token:function(e,t){if(e.eatSpace())return null;var i=t.tokenize(e,t);return i},blockCommentStart:"/*",blockCommentEnd:"*/"}}),e.defineMIME("text/x-dylan","dylan")});
