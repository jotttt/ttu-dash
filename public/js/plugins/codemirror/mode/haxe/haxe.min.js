!function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";e.defineMode("haxe",function(e,t){function a(e,t,i){return t.tokenize=i,i(e,t)}function o(e,t){for(var r,i=!1;null!=(r=e.next());){if(r==t&&!i)return!1;i=!i&&"\\"==r}return i}function u(e,t,i){return s=e,l=i,t}function c(e,t){var i=e.next();if('"'==i||"'"==i)return a(e,t,f(i));if(/[\[\]{}\(\),;\:\.]/.test(i))return u(i);if("0"==i&&e.eat(/x/i))return e.eatWhile(/[\da-f]/i),u("number","number");if(/\d/.test(i)||"-"==i&&e.eat(/\d/))return e.match(/^\d*(?:\.\d*)?(?:[eE][+\-]?\d+)?/),u("number","number");if(t.reAllowed&&"~"==i&&e.eat(/\//))return o(e,"/"),e.eatWhile(/[gimsu]/),u("regexp","string-2");if("/"==i)return e.eat("*")?a(e,t,d):e.eat("/")?(e.skipToEnd(),u("comment","comment")):(e.eatWhile(n),u("operator",null,e.current()));if("#"==i)return e.skipToEnd(),u("conditional","meta");if("@"==i)return e.eat(/:/),e.eatWhile(/[\w_]/),u("metadata","meta");if(n.test(i))return e.eatWhile(n),u("operator",null,e.current());var s;if(/[A-Z]/.test(i))return e.eatWhile(/[\w_<>]/),s=e.current(),u("type","variable-3",s);e.eatWhile(/[\w_]/);var s=e.current(),l=r.propertyIsEnumerable(s)&&r[s];return l&&t.kwAllowed?u(l.type,l.style,s):u("variable","variable",s)}function f(e){return function(t,i){return o(t,e)||(i.tokenize=c),u("string","string")}}function d(e,t){for(var r,i=!1;r=e.next();){if("/"==r&&i){t.tokenize=c;break}i="*"==r}return u("comment","comment")}function p(e,t,i,r,n,a){this.indented=e,this.column=t,this.type=i,this.prev=n,this.info=a,null!=r&&(this.align=r)}function m(e,t){for(var i=e.localVars;i;i=i.next)if(i.name==t)return!0}function y(e,t,i,r,n){var a=e.cc;for(b.state=e,b.stream=n,b.marked=null,b.cc=a,e.lexical.hasOwnProperty("align")||(e.lexical.align=!0);;){var o=a.length?a.pop():E;if(o(i,r)){for(;a.length&&a[a.length-1].lex;)a.pop()();return b.marked?b.marked:"variable"==i&&m(e,r)?"variable-2":"variable"==i&&g(e,r)?"variable-3":t}}}function g(e,t){if(/[a-z]/.test(t.charAt(0)))return!1;for(var i=e.importedtypes.length,r=0;i>r;r++)if(e.importedtypes[r]==t)return!0}function v(e){for(var t=b.state,i=t.importedtypes;i;i=i.next)if(i.name==e)return;t.importedtypes={name:e,next:t.importedtypes}}function w(){for(var e=arguments.length-1;e>=0;e--)b.cc.push(arguments[e])}function x(){return w.apply(null,arguments),!0}function j(e){var t=b.state;if(t.context){b.marked="def";for(var i=t.localVars;i;i=i.next)if(i.name==e)return;t.localVars={name:e,next:t.localVars}}}function Q(){b.state.context||(b.state.localVars=k),b.state.context={prev:b.state.context,vars:b.state.localVars}}function T(){b.state.localVars=b.state.context.vars,b.state.context=b.state.context.prev}function C(e,t){var i=function(){var i=b.state;i.lexical=new p(i.indented,b.stream.column(),e,null,i.lexical,t)};return i.lex=!0,i}function S(){var e=b.state;e.lexical.prev&&(")"==e.lexical.type&&(e.indented=e.lexical.indented),e.lexical=e.lexical.prev)}function _(e){function t(i){return i==e?x():";"==e?w():x(t)}return t}function E(e){return"@"==e?x(I):"var"==e?x(C("vardef"),H,_(";"),S):"keyword a"==e?x(C("form"),N,E,S):"keyword b"==e?x(C("form"),E,S):"{"==e?x(C("}"),Q,z,S,T):";"==e?x():"attribute"==e?x(D):"function"==e?x(V):"for"==e?x(C("form"),_("("),C(")"),W,_(")"),S,E,S):"variable"==e?x(C("stat"),P):"switch"==e?x(C("form"),N,C("}","switch"),_("{"),z,S,S):"case"==e?x(N,_(":")):"default"==e?x(_(":")):"catch"==e?x(C("form"),Q,_("("),K,_(")"),E,S,T):"import"==e?x($,_(";")):"typedef"==e?x(L):w(C("stat"),N,_(";"),S)}function N(e){return h.hasOwnProperty(e)?x(O):"function"==e?x(V):"keyword c"==e?x(A):"("==e?x(C(")"),A,_(")"),S,O):"operator"==e?x(N):"["==e?x(C("]"),q(N,"]"),S,O):"{"==e?x(C("}"),q(F,"}"),S,O):x()}function A(e){return e.match(/[;\}\)\],]/)?w():w(N)}function O(e,t){if("operator"==e&&/\+\+|--/.test(t))return x(O);if("operator"==e||":"==e)return x(N);if(";"!=e)return"("==e?x(C(")"),q(N,")"),S,O):"."==e?x(R,O):"["==e?x(C("]"),N,_("]"),S,O):void 0}function D(e){return"attribute"==e?x(D):"function"==e?x(V):"var"==e?x(H):void 0}function I(e){return":"==e?x(I):"variable"==e?x(I):"("==e?x(C(")"),q(M,")"),S,E):void 0}function M(e){return"variable"==e?x():void 0}function $(e,t){return"variable"==e&&/[A-Z]/.test(t.charAt(0))?(v(t),x()):"variable"==e||"property"==e||"."==e||"*"==t?x($):void 0}function L(e,t){return"variable"==e&&/[A-Z]/.test(t.charAt(0))?(v(t),x()):"type"==e&&/[A-Z]/.test(t.charAt(0))?x():void 0}function P(e){return":"==e?x(S,E):w(O,_(";"),S)}function R(e){return"variable"==e?(b.marked="property",x()):void 0}function F(e){return"variable"==e&&(b.marked="property"),h.hasOwnProperty(e)?x(_(":"),N):void 0}function q(e,t){function i(r){return","==r?x(e,i):r==t?x():x(_(t))}return function(r){return r==t?x():w(e,i)}}function z(e){return"}"==e?x():w(E,z)}function H(e,t){return"variable"==e?(j(t),x(X,B)):x()}function B(e,t){return"="==t?x(N,B):","==e?x(H):void 0}function W(e,t){return"variable"==e&&j(t),x(C(")"),Q,U,N,S,E,T)}function U(e,t){return"in"==t?x():void 0}function V(e,t){return"variable"==e?(j(t),x(V)):"new"==t?x(V):"("==e?x(C(")"),Q,q(K,")"),S,X,E,T):void 0}function X(e){return":"==e?x(Y):void 0}function Y(e){return"type"==e?x():"variable"==e?x():"{"==e?x(C("}"),q(G,"}"),S):void 0}function G(e){return"variable"==e?x(X):void 0}function K(e,t){return"variable"==e?(j(t),x(X)):void 0}var s,l,i=e.indentUnit,r=function(){function e(e){return{type:e,style:"keyword"}}var t=e("keyword a"),i=e("keyword b"),r=e("keyword c"),n=e("operator"),a={type:"atom",style:"atom"},o={type:"attribute",style:"attribute"},s=e("typedef");return{"if":t,"while":t,"else":i,"do":i,"try":i,"return":r,"break":r,"continue":r,"new":r,"throw":r,"var":e("var"),inline:o,"static":o,using:e("import"),"public":o,"private":o,cast:e("cast"),"import":e("import"),macro:e("macro"),"function":e("function"),"catch":e("catch"),untyped:e("untyped"),callback:e("cb"),"for":e("for"),"switch":e("switch"),"case":e("case"),"default":e("default"),"in":n,never:e("property_access"),trace:e("trace"),"class":s,"abstract":s,"enum":s,"interface":s,typedef:s,"extends":s,"implements":s,dynamic:s,"true":a,"false":a,"null":a}}(),n=/[+\-*&%=<>!?|]/,h={atom:!0,number:!0,variable:!0,string:!0,regexp:!0},b={state:null,column:null,marked:null,cc:null},k={name:"this",next:null};return S.lex=!0,{startState:function(e){var r=["Int","Float","String","Void","Std","Bool","Dynamic","Array"];return{tokenize:c,reAllowed:!0,kwAllowed:!0,cc:[],lexical:new p((e||0)-i,0,"block",!1),localVars:t.localVars,importedtypes:r,context:t.localVars&&{vars:t.localVars},indented:0}},token:function(e,t){if(e.sol()&&(t.lexical.hasOwnProperty("align")||(t.lexical.align=!1),t.indented=e.indentation()),e.eatSpace())return null;var i=t.tokenize(e,t);return"comment"==s?i:(t.reAllowed=!("operator"!=s&&"keyword c"!=s&&!s.match(/^[\[{}\(,;:]$/)),t.kwAllowed="."!=s,y(t,i,s,l,e))},indent:function(e,t){if(e.tokenize!=c)return 0;var r=t&&t.charAt(0),n=e.lexical;"stat"==n.type&&"}"==r&&(n=n.prev);var a=n.type,o=r==a;return"vardef"==a?n.indented+4:"form"==a&&"{"==r?n.indented:"stat"==a||"form"==a?n.indented+i:"switch"!=n.info||o?n.align?n.column+(o?0:1):n.indented+(o?0:i):n.indented+(/^(?:case|default)\b/.test(t)?i:2*i)},electricChars:"{}",blockCommentStart:"/*",blockCommentEnd:"*/",lineComment:"//"}}),e.defineMIME("text/x-haxe","haxe"),e.defineMode("hxml",function(){return{startState:function(){return{define:!1,inString:!1}},token:function(e,t){var i=e.peek(),r=e.sol();if("#"==i)return e.skipToEnd(),"comment";if(r&&"-"==i){var n="variable-2";return e.eat(/-/),"-"==e.peek()&&(e.eat(/-/),n="keyword a"),"D"==e.peek()&&(e.eat(/[D]/),n="keyword c",t.define=!0),e.eatWhile(/[A-Z]/i),n}var i=e.peek();return 0==t.inString&&"'"==i&&(t.inString=!0,i=e.next()),1==t.inString?(e.skipTo("'")||e.skipToEnd(),"'"==e.peek()&&(e.next(),t.inString=!1),"string"):(e.next(),null)},lineComment:"#"}}),e.defineMIME("text/x-hxml","hxml")});
