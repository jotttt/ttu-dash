!function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";e.defineMode("javascript",function(t,r){function d(e){for(var r,t=!1,i=!1;null!=(r=e.next());){if(!t){if("/"==r&&!i)return;"["==r?i=!0:i&&"]"==r&&(i=!1)}t=!t&&"\\"==r}}function m(e,t,r){return h=e,p=r,t}function y(e,t){var r=e.next();if('"'==r||"'"==r)return t.tokenize=g(r),t.tokenize(e,t);if("."==r&&e.match(/^\d+(?:[eE][+\-]?\d+)?/))return m("number","number");if("."==r&&e.match(".."))return m("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(r))return m(r);if("="==r&&e.eat(">"))return m("=>","operator");if("0"==r&&e.eat(/x/i))return e.eatWhile(/[\da-f]/i),m("number","number");if(/\d/.test(r))return e.match(/^\d*(?:\.\d*)?(?:[eE][+\-]?\d+)?/),m("number","number");if("/"==r)return e.eat("*")?(t.tokenize=v,v(e,t)):e.eat("/")?(e.skipToEnd(),m("comment","comment")):"operator"==t.lastType||"keyword c"==t.lastType||"sof"==t.lastType||/^[\[{}\(,;:]$/.test(t.lastType)?(d(e),e.eatWhile(/[gimy]/),m("regexp","string-2")):(e.eatWhile(c),m("operator","operator",e.current()));if("`"==r)return t.tokenize=b,b(e,t);if("#"==r)return e.skipToEnd(),m("error","error");if(c.test(r))return e.eatWhile(c),m("operator","operator",e.current());if(l.test(r)){e.eatWhile(l);var i=e.current(),n=u.propertyIsEnumerable(i)&&u[i];return n&&"."!=t.lastType?m(n.type,n.style,i):m("variable","variable",i)}}function g(e){return function(t,r){var n,i=!1;if(a&&"@"==t.peek()&&t.match(f))return r.tokenize=y,m("jsonld-keyword","meta");for(;null!=(n=t.next())&&(n!=e||i);)i=!i&&"\\"==n;return i||(r.tokenize=y),m("string","string")}}function v(e,t){for(var i,r=!1;i=e.next();){if("/"==i&&r){t.tokenize=y;break}r="*"==i}return m("comment","comment")}function b(e,t){for(var i,r=!1;null!=(i=e.next());){if(!r&&("`"==i||"$"==i&&e.eat("{"))){t.tokenize=y;break}r=!r&&"\\"==i}return m("quasi","string-2",e.current())}function x(e,t){t.fatArrowAt&&(t.fatArrowAt=null);var r=e.string.indexOf("=>",e.start);if(!(0>r)){for(var i=0,n=!1,a=r-1;a>=0;--a){var o=e.string.charAt(a),s=w.indexOf(o);if(s>=0&&3>s){if(!i){++a;break}if(0==--i)break}else if(s>=3&&6>s)++i;else if(l.test(o))n=!0;else if(n&&!i){++a;break}}n&&!i&&(t.fatArrowAt=a)}}function k(e,t,r,i,n,a){this.indented=e,this.column=t,this.type=r,this.prev=n,this.info=a,null!=i&&(this.align=i)}function Q(e,t){for(var r=e.localVars;r;r=r.next)if(r.name==t)return!0;for(var i=e.context;i;i=i.prev)for(var r=i.vars;r;r=r.next)if(r.name==t)return!0}function T(e,t,r,i,n){var a=e.cc;for(S.state=e,S.stream=n,S.marked=null,S.cc=a,S.style=t,e.lexical.hasOwnProperty("align")||(e.lexical.align=!0);;){var s=a.length?a.pop():o?L:$;if(s(r,i)){for(;a.length&&a[a.length-1].lex;)a.pop()();return S.marked?S.marked:"variable"==r&&Q(e,i)?"variable-2":t}}}function C(){for(var e=arguments.length-1;e>=0;e--)S.cc.push(arguments[e])}function _(){return C.apply(null,arguments),!0}function E(e){function t(t){for(var r=t;r;r=r.next)if(r.name==e)return!0;return!1}var i=S.state;if(i.context){if(S.marked="def",t(i.localVars))return;i.localVars={name:e,next:i.localVars}}else{if(t(i.globalVars))return;r.globalVars&&(i.globalVars={name:e,next:i.globalVars})}}function A(){S.state.context={prev:S.state.context,vars:S.state.localVars},S.state.localVars=N}function M(){S.state.localVars=S.state.context.vars,S.state.context=S.state.context.prev}function O(e,t){var r=function(){var r=S.state,i=r.indented;if("stat"==r.lexical.type)i=r.lexical.indented;else for(var n=r.lexical;n&&")"==n.type&&n.align;n=n.prev)i=n.indented;r.lexical=new k(i,S.stream.column(),e,null,r.lexical,t)};return r.lex=!0,r}function I(){var e=S.state;e.lexical.prev&&(")"==e.lexical.type&&(e.indented=e.lexical.indented),e.lexical=e.lexical.prev)}function D(e){function t(r){return r==e?_():";"==e?C():_(t)}return t}function $(e,t){return"var"==e?_(O("vardef",t.length),ne,D(";"),I):"keyword a"==e?_(O("form"),L,$,I):"keyword b"==e?_(O("form"),$,I):"{"==e?_(O("}"),te,I):";"==e?_():"if"==e?("else"==S.state.lexical.info&&S.state.cc[S.state.cc.length-1]==I&&S.state.cc.pop()(),_(O("form"),L,$,I,ue)):"function"==e?_(me):"for"==e?_(O("form"),ce,$,I):"variable"==e?_(O("stat"),X):"switch"==e?_(O("form"),L,O("}","switch"),D("{"),te,I,I):"case"==e?_(L,D(":")):"default"==e?_(D(":")):"catch"==e?_(O("form"),A,D("("),ye,D(")"),$,I,M):"module"==e?_(O("form"),A,xe,M,I):"class"==e?_(O("form"),ge,I):"export"==e?_(O("form"),je,I):"import"==e?_(O("form"),ke,I):C(O("stat"),L,D(";"),I)}function L(e){return R(e,!1)}function P(e){return R(e,!0)}function R(e,t){if(S.state.fatArrowAt==S.stream.start){var r=t?V:U;if("("==e)return _(A,O(")"),J(ae,")"),I,D("=>"),r,M);if("variable"==e)return C(A,ae,D("=>"),r,M)}var i=t?H:z;return j.hasOwnProperty(e)?_(i):"function"==e?_(me,i):"keyword c"==e?_(t?q:F):"("==e?_(O(")"),F,_e,D(")"),I,i):"operator"==e||"spread"==e?_(t?P:L):"["==e?_(O("]"),Se,I,i):"{"==e?ee(G,"}",null,i):"quasi"==e?C(B,i):_()}function F(e){return e.match(/[;\}\)\],]/)?C():C(L)}function q(e){return e.match(/[;\}\)\],]/)?C():C(P)}function z(e,t){return","==e?_(L):H(e,t,!1)}function H(e,t,r){var i=0==r?z:H,n=0==r?L:P;return"=>"==e?_(A,r?V:U,M):"operator"==e?/\+\+|--/.test(t)?_(i):"?"==t?_(L,D(":"),n):_(n):"quasi"==e?C(B,i):";"!=e?"("==e?ee(P,")","call",i):"."==e?_(Y,i):"["==e?_(O("]"),F,D("]"),I,i):void 0:void 0}function B(e,t){return"quasi"!=e?C():"${"!=t.slice(t.length-2)?_(B):_(L,W)}function W(e){return"}"==e?(S.marked="string-2",S.state.tokenize=b,_(B)):void 0}function U(e){return x(S.stream,S.state),C("{"==e?$:L)}function V(e){return x(S.stream,S.state),C("{"==e?$:P)}function X(e){return":"==e?_(I,$):C(z,D(";"),I)}function Y(e){return"variable"==e?(S.marked="property",_()):void 0}function G(e,t){return"variable"==e||"keyword"==S.style?(S.marked="property",_("get"==t||"set"==t?K:Z)):"number"==e||"string"==e?(S.marked=a?"property":S.style+" property",_(Z)):"jsonld-keyword"==e?_(Z):"["==e?_(L,D("]"),Z):void 0}function K(e){return"variable"!=e?C(Z):(S.marked="property",_(me))}function Z(e){return":"==e?_(P):"("==e?C(me):void 0}function J(e,t){function r(i){if(","==i){var n=S.state.lexical;return"call"==n.info&&(n.pos=(n.pos||0)+1),_(e,r)}return i==t?_():_(D(t))}return function(i){return i==t?_():C(e,r)}}function ee(e,t,r){for(var i=3;i<arguments.length;i++)S.cc.push(arguments[i]);return _(O(t,r),J(e,t),I)}function te(e){return"}"==e?_():C($,te)}function re(e){return s&&":"==e?_(ie):void 0}function ie(e){return"variable"==e?(S.marked="variable-3",_()):void 0}function ne(){return C(ae,re,se,le)}function ae(e,t){return"variable"==e?(E(t),_()):"["==e?ee(ae,"]"):"{"==e?ee(oe,"}"):void 0}function oe(e,t){return"variable"!=e||S.stream.match(/^\s*:/,!1)?("variable"==e&&(S.marked="property"),_(D(":"),ae,se)):(E(t),_(se))}function se(e,t){return"="==t?_(P):void 0}function le(e){return","==e?_(ne):void 0}function ue(e,t){return"keyword b"==e&&"else"==t?_(O("form","else"),$,I):void 0}function ce(e){return"("==e?_(O(")"),fe,D(")"),I):void 0}function fe(e){return"var"==e?_(ne,D(";"),he):";"==e?_(he):"variable"==e?_(de):C(L,D(";"),he)}function de(e,t){return"in"==t||"of"==t?(S.marked="keyword",_(L)):_(z,he)}function he(e,t){return";"==e?_(pe):"in"==t||"of"==t?(S.marked="keyword",_(L)):C(L,D(";"),pe)}function pe(e){")"!=e&&_(L)}function me(e,t){return"*"==t?(S.marked="keyword",_(me)):"variable"==e?(E(t),_(me)):"("==e?_(A,O(")"),J(ye,")"),I,$,M):void 0}function ye(e){return"spread"==e?_(ye):C(ae,re)}function ge(e,t){return"variable"==e?(E(t),_(ve)):void 0}function ve(e,t){return"extends"==t?_(L,ve):"{"==e?_(O("}"),be,I):void 0}function be(e,t){return"variable"==e||"keyword"==S.style?(S.marked="property","get"==t||"set"==t?_(we,me,be):_(me,be)):"*"==t?(S.marked="keyword",_(be)):";"==e?_(be):"}"==e?_():void 0}function we(e){return"variable"!=e?C():(S.marked="property",_())}function xe(e,t){return"string"==e?_($):"variable"==e?(E(t),_(Te)):void 0}function je(e,t){return"*"==t?(S.marked="keyword",_(Te,D(";"))):"default"==t?(S.marked="keyword",_(L,D(";"))):C($)}function ke(e){return"string"==e?_():C(Qe,Te)}function Qe(e,t){return"{"==e?ee(Qe,"}"):("variable"==e&&E(t),_())}function Te(e,t){return"from"==t?(S.marked="keyword",_(L)):void 0}function Se(e){return"]"==e?_():C(P,Ce)}function Ce(e){return"for"==e?C(_e,D("]")):","==e?_(J(q,"]")):C(J(P,"]"))}function _e(e){return"for"==e?_(ce,_e):"if"==e?_(L,_e):void 0}var h,p,i=t.indentUnit,n=r.statementIndent,a=r.jsonld,o=r.json||a,s=r.typescript,l=r.wordCharacters||/[\w$\xa1-\uffff]/,u=function(){function e(e){return{type:e,style:"keyword"}}var t=e("keyword a"),r=e("keyword b"),i=e("keyword c"),n=e("operator"),a={type:"atom",style:"atom"},o={"if":e("if"),"while":t,"with":t,"else":r,"do":r,"try":r,"finally":r,"return":i,"break":i,"continue":i,"new":i,"delete":i,"throw":i,"debugger":i,"var":e("var"),"const":e("var"),let:e("var"),"function":e("function"),"catch":e("catch"),"for":e("for"),"switch":e("switch"),"case":e("case"),"default":e("default"),"in":n,"typeof":n,"instanceof":n,"true":a,"false":a,"null":a,undefined:a,NaN:a,Infinity:a,"this":e("this"),module:e("module"),"class":e("class"),"super":e("atom"),"yield":i,"export":e("export"),"import":e("import"),"extends":i};if(s){var l={type:"variable",style:"variable-3"},u={"interface":e("interface"),"extends":e("extends"),constructor:e("constructor"),"public":e("public"),"private":e("private"),"protected":e("protected"),"static":e("static"),string:l,number:l,bool:l,any:l};for(var c in u)o[c]=u[c]}return o}(),c=/[+\-*&%=<>!?|~^]/,f=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/,w="([{}])",j={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,"this":!0,"jsonld-keyword":!0},S={state:null,column:null,marked:null,cc:null},N={name:"this",next:{name:"arguments"}};return I.lex=!0,{startState:function(e){var t={tokenize:y,lastType:"sof",cc:[],lexical:new k((e||0)-i,0,"block",!1),localVars:r.localVars,context:r.localVars&&{vars:r.localVars},indented:0};return r.globalVars&&"object"==typeof r.globalVars&&(t.globalVars=r.globalVars),t},token:function(e,t){if(e.sol()&&(t.lexical.hasOwnProperty("align")||(t.lexical.align=!1),t.indented=e.indentation(),x(e,t)),t.tokenize!=v&&e.eatSpace())return null;var r=t.tokenize(e,t);return"comment"==h?r:(t.lastType="operator"!=h||"++"!=p&&"--"!=p?h:"incdec",T(t,r,h,p,e))},indent:function(t,a){if(t.tokenize==v)return e.Pass;if(t.tokenize!=y)return 0;var o=a&&a.charAt(0),s=t.lexical;if(!/^\s*else\b/.test(a))for(var l=t.cc.length-1;l>=0;--l){var u=t.cc[l];if(u==I)s=s.prev;else if(u!=ue)break}"stat"==s.type&&"}"==o&&(s=s.prev),n&&")"==s.type&&"stat"==s.prev.type&&(s=s.prev);var c=s.type,f=o==c;return"vardef"==c?s.indented+("operator"==t.lastType||","==t.lastType?s.info+1:0):"form"==c&&"{"==o?s.indented:"form"==c?s.indented+i:"stat"==c?s.indented+("operator"==t.lastType||","==t.lastType?n||i:0):"switch"!=s.info||f||0==r.doubleIndentSwitch?s.align?s.column+(f?0:1):s.indented+(f?0:i):s.indented+(/^(?:case|default)\b/.test(a)?i:2*i)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:o?null:"/*",blockCommentEnd:o?null:"*/",lineComment:o?null:"//",fold:"brace",helperType:o?"json":"javascript",jsonldMode:a,jsonMode:o}}),e.registerHelper("wordChars","javascript",/[\w$]/),e.defineMIME("text/javascript","javascript"),e.defineMIME("text/ecmascript","javascript"),e.defineMIME("application/javascript","javascript"),e.defineMIME("application/x-javascript","javascript"),e.defineMIME("application/ecmascript","javascript"),e.defineMIME("application/json",{name:"javascript",json:!0}),e.defineMIME("application/x-json",{name:"javascript",json:!0}),e.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),e.defineMIME("text/typescript",{name:"javascript",typescript:!0}),e.defineMIME("application/typescript",{name:"javascript",typescript:!0})});
