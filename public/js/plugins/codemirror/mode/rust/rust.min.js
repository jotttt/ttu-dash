!function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";e.defineMode("rust",function(){function s(e,t){return a=e,t}function l(e,t){var r=e.next();if('"'==r)return t.tokenize=u,t.tokenize(e,t);if("'"==r)return a="atom",e.eat("\\")?e.skipTo("'")?(e.next(),"string"):"error":(e.next(),e.eat("'")?"string":"error");if("/"==r){if(e.eat("/"))return e.skipToEnd(),"comment";if(e.eat("*"))return t.tokenize=c(1),t.tokenize(e,t)}if("#"==r)return e.eat("[")?(a="open-attr",null):(e.eatWhile(/\w/),s("macro","meta"));if(":"==r&&e.match(":<"))return s("op",null);if(r.match(/\d/)||"."==r&&e.eat(/\d/)){var i=!1;return e.match(/^x[\da-f]+/i)||e.match(/^b[01]+/)||(e.eatWhile(/\d/),e.eat(".")&&(i=!0,e.eatWhile(/\d/)),e.match(/^e[+\-]?\d+/i)&&(i=!0)),i?e.match(/^f(?:32|64)/):e.match(/^[ui](?:8|16|32|64)/),s("atom","number")}return r.match(/[()\[\]{}:;,]/)?s(r,null):"-"==r&&e.eat(">")?s("->",null):r.match(n)?(e.eatWhile(n),s("op",null)):(e.eatWhile(/\w/),o=e.current(),e.match(/^::\w/)?(e.backUp(1),s("prefix","variable-2")):t.keywords.propertyIsEnumerable(o)?s(t.keywords[o],o.match(/true|false/)?"atom":"keyword"):s("name","variable"))}function u(e,t){for(var r,i=!1;r=e.next();){if('"'==r&&!i)return t.tokenize=l,s("atom","string");i=!i&&"\\"==r}return s("op","string")}function c(e){return function(t,r){for(var n,i=null;n=t.next();){if("/"==n&&"*"==i){if(1==e){r.tokenize=l;break}return r.tokenize=c(e-1),r.tokenize(t,r)}if("*"==n&&"/"==i)return r.tokenize=c(e+1),r.tokenize(t,r);i=n}return"comment"}}function d(){for(var e=arguments.length-1;e>=0;e--)f.cc.push(arguments[e])}function p(){return d.apply(null,arguments),!0}function h(e,t){var r=function(){var r=f.state;r.lexical={indented:r.indented,column:f.stream.column(),type:e,prev:r.lexical,info:t}};return r.lex=!0,r}function m(){var e=f.state;e.lexical.prev&&(")"==e.lexical.type&&(e.indented=e.lexical.indented),e.lexical=e.lexical.prev)}function y(){f.state.keywords=i}function g(){f.state.keywords=r}function v(e,t){function r(i){return","==i?p(e,r):i==t?p():p(r)}return function(i){return i==t?p():d(e,r)}}function b(e,t){return p(h("stat",t),e,m,x)}function x(e){return"}"==e?p():"let"==e?b(C,"let"):"fn"==e?b(A):"type"==e?p(h("stat"),I,w,m,x):"enum"==e?b(M):"mod"==e?b(L):"iface"==e?b(D):"impl"==e?b(R):"open-attr"==e?p(h("]"),v(k,"]"),m):"ignore"==e||e.match(/[\]\);,]/)?p(x):d(h("stat"),k,m,w,x)}function w(e){return";"==e?p():d()}function k(e){return"atom"==e||"name"==e?p(_):"{"==e?p(h("}"),T,m):e.match(/[\[\(]/)?Y(e,k):e.match(/[\]\)\};,]/)?d():"if-style"==e?p(k,k):"else-style"==e||"op"==e?p(k):"for"==e?p(B,N,$,k,k):"alt"==e?p(k,W):"fn"==e?p(A):"macro"==e?p(X):p()}function _(e){return"."==o?p(j):"::<"==o?p(q,_):"op"==e||":"==o?p(k):"("==e||"["==e?Y(e,k):d()}function j(){return o.match(/^\w+$/)?(f.marked="variable",p(_)):d(k)}function T(e){if("op"==e){if("|"==o)return p(Q,m,h("}","block"),x);if("||"==o)return p(m,h("}","block"),x)}return d("mutable"==o||o.match(/^\w+$/)&&":"==f.stream.peek()&&!f.stream.match("::",!1)?S(k):x)}function S(e){function t(r){return"mutable"==o||"with"==o?(f.marked="keyword",p(t)):o.match(/^\w*$/)?(f.marked="variable",p(t)):":"==r?p(e,t):"}"==r?p():p(t)}return t}function Q(e){return"name"==e?(f.marked="def",p(Q)):"op"==e&&"|"==o?p():p(Q)}function C(e){return e.match(/[\]\)\};]/)?p():"="==o?p(k,E):","==e?p(C):d(B,N,C)}function E(e){return e.match(/[\]\)\};,]/)?d(C):d(k,E)}function N(e){return":"==e?p(y,z,g):d()}function $(e){return"name"==e&&"in"==o?(f.marked="keyword",p()):d()}function A(e){return"@"==o||"~"==o?(f.marked="keyword",p(A)):"name"==e?(f.marked="def",p(A)):"<"==o?p(q,A):"{"==e?d(k):"("==e?p(h(")"),v(P,")"),m,A):"->"==e?p(y,z,g,A):";"==e?p():p(A)}function I(e){return"name"==e?(f.marked="def",p(I)):"<"==o?p(q,I):"="==o?p(y,z,g):p(I)}function M(e){return"name"==e?(f.marked="def",p(M)):"<"==o?p(q,M):"="==o?p(y,z,g,w):"{"==e?p(h("}"),y,O,g,m):p(M)}function O(e){return"}"==e?p():"("==e?p(h(")"),v(z,")"),m,O):(o.match(/^\w+$/)&&(f.marked="def"),p(O))}function L(e){return"name"==e?(f.marked="def",p(L)):"{"==e?p(h("}"),x,m):d()}function D(e){return"name"==e?(f.marked="def",p(D)):"<"==o?p(q,D):"{"==e?p(h("}"),x,m):d()}function R(e){return"<"==o?p(q,R):"of"==o||"for"==o?(f.marked="keyword",p(z,R)):"name"==e?(f.marked="def",p(R)):"{"==e?p(h("}"),x,m):d()}function q(){return">"==o?p():","==o?p(q):":"==o?p(z,q):d(z,q)}function P(e){return"name"==e?(f.marked="def",p(P)):":"==e?p(y,z,g):d()}function z(e){return"name"==e?(f.marked="variable-3",p(F)):"mutable"==o?(f.marked="keyword",p(z)):"atom"==e?p(F):"op"==e||"obj"==e?p(z):"fn"==e?p(H):"{"==e?p(h("{"),S(z),m):Y(e,z)}function F(){return"<"==o?p(q):d()}function H(e){return"("==e?p(h("("),v(z,")"),m,H):"->"==e?p(z):d()}function B(e){return"name"==e?(f.marked="def",p(U)):"atom"==e?p(U):"op"==e?p(B):e.match(/[\]\)\};,]/)?d():Y(e,B)}function U(e){return"op"==e&&"."==o?p():"to"==o?(f.marked="keyword",p(B)):d()}function W(e){return"{"==e?p(h("}","alt"),V,m):d()}function V(e){return"}"==e?p():"|"==e?p(V):"when"==o?(f.marked="keyword",p(k,G)):e.match(/[\]\);,]/)?p(V):d(B,G)}function G(e){return"{"==e?p(h("}","alt"),x,m,V):d(V)}function X(e){return e.match(/[\[\(\{]/)?Y(e,k):d()}function Y(e,t){return"["==e?p(h("]"),v(t,"]"),m):"("==e?p(h(")"),v(t,")"),m):"{"==e?p(h("}"),v(t,"}"),m):p()}function K(e,t,r){var i=e.cc;for(f.state=e,f.stream=t,f.marked=null,f.cc=i;;){var n=i.length?i.pop():x;if(n(a)){for(;i.length&&i[i.length-1].lex;)i.pop()();return f.marked||r}}}var a,o,e=4,t=2,r={"if":"if-style","while":"if-style",loop:"else-style","else":"else-style","do":"else-style",ret:"else-style",fail:"else-style","break":"atom",cont:"atom","const":"let",resource:"fn",let:"let",fn:"fn","for":"for",alt:"alt",iface:"iface",impl:"impl",type:"type","enum":"enum",mod:"mod",as:"op","true":"atom","false":"atom",assert:"op",check:"op",claim:"op","native":"ignore",unsafe:"ignore","import":"else-style","export":"else-style",copy:"op",log:"op",log_err:"op",use:"op",bind:"op",self:"atom",struct:"enum"},i=function(){for(var e={fn:"fn",block:"fn",obj:"obj"},t="bool uint int i8 i16 i32 i64 u8 u16 u32 u64 float f32 f64 str char".split(" "),r=0,i=t.length;i>r;++r)e[t[r]]="atom";return e}(),n=/[+\-*&%=<>!?|\.@]/,f={state:null,stream:null,marked:null,cc:null};return m.lex=y.lex=g.lex=!0,{startState:function(){return{tokenize:l,cc:[],lexical:{indented:-e,column:0,type:"top",align:!1},keywords:r,indented:0}},token:function(e,t){if(e.sol()&&(t.lexical.hasOwnProperty("align")||(t.lexical.align=!1),t.indented=e.indentation()),e.eatSpace())return null;a=o=null;var r=t.tokenize(e,t);return"comment"==r?r:(t.lexical.hasOwnProperty("align")||(t.lexical.align=!0),"prefix"==a?r:(o||(o=e.current()),K(t,e,r)))},indent:function(r,i){if(r.tokenize!=l)return 0;var n=i&&i.charAt(0),a=r.lexical,o=a.type,s=n==o;return"stat"==o?a.indented+e:a.align?a.column+(s?0:1):a.indented+(s?0:"alt"==a.info?t:e)},electricChars:"{}",blockCommentStart:"/*",blockCommentEnd:"*/",lineComment:"//",fold:"brace"}}),e.defineMIME("text/x-rustsrc","rust")});
