!function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";e.defineMode("stex",function(){function e(e,t){e.cmdState.push(t)}function t(e){return e.cmdState.length>0?e.cmdState[e.cmdState.length-1]:null}function r(e){var t=e.cmdState.pop();t&&t.closeBracket()}function i(e){for(var t=e.cmdState,r=t.length-1;r>=0;r--){var i=t[r];if("DEFAULT"!=i.name)return i}return{styleIdentifier:function(){return null}}}function n(e,t,r){return function(){this.name=e,this.bracketNo=0,this.style=t,this.styles=r,this.argument=null,this.styleIdentifier=function(){return this.styles[this.bracketNo-1]||null},this.openBracket=function(){return this.bracketNo++,"bracket"},this.closeBracket=function(){}}}function o(e,t){e.f=t}function s(r,n){var s;if(r.match(/^\\[a-zA-Z@]+/)){var f=r.current().slice(1);return s=a[f]||a.DEFAULT,s=new s,e(n,s),o(n,c),s.style}if(r.match(/^\\[$&%#{}_]/))return"tag";if(r.match(/^\\[,;!\/\\]/))return"tag";if(r.match("\\["))return o(n,function(e,t){return u(e,t,"\\]")}),"keyword";if(r.match("$$"))return o(n,function(e,t){return u(e,t,"$$")}),"keyword";if(r.match("$"))return o(n,function(e,t){return u(e,t,"$")}),"keyword";var d=r.next();return"%"==d?(r.eol()||o(n,l),"comment"):"}"==d||"]"==d?(s=t(n))?(s.closeBracket(d),o(n,c),"bracket"):"error":"{"==d||"["==d?(s=a.DEFAULT,s=new s,e(n,s),"bracket"):/\d/.test(d)?(r.eatWhile(/[\w.%]/),"atom"):(r.eatWhile(/[\w\-_]/),s=i(n),"begin"==s.name&&(s.argument=r.current()),s.styleIdentifier())}function l(e,t){return e.skipToEnd(),o(t,s),"comment"}function u(e,t,r){if(e.eatSpace())return null;if(e.match(r))return o(t,s),"keyword";if(e.match(/^\\[a-zA-Z@]+/))return"tag";if(e.match(/^[a-zA-Z]+/))return"variable-2";if(e.match(/^\\[$&%#{}_]/))return"tag";if(e.match(/^\\[,;!\/]/))return"tag";if(e.match(/^[\^_&]/))return"tag";if(e.match(/^[+\-<>|=,\/@!*:;'"`~#?]/))return null;if(e.match(/^(\d+\.\d*|\d*\.\d+|\d+)/))return"number";var i=e.next();return"{"==i||"}"==i||"["==i||"]"==i||"("==i||")"==i?"bracket":"%"==i?(e.eol()||e.skipToEnd(),"comment"):"error"}function c(e,i){var a,n=e.peek();return"{"==n||"["==n?(a=t(i),a.openBracket(n),e.eat(n),o(i,s),"bracket"):/[ \t\r]/.test(n)?(e.eat(n),null):(o(i,s),r(i),s(e,i))}var a={};return a.importmodule=n("importmodule","tag",["string","builtin"]),a.documentclass=n("documentclass","tag",["","atom"]),a.usepackage=n("usepackage","tag",["atom"]),a.begin=n("begin","tag",["atom"]),a.end=n("end","tag",["atom"]),a.DEFAULT=function(){this.name="DEFAULT",this.style="tag",this.styleIdentifier=this.openBracket=this.closeBracket=function(){}},{startState:function(){return{cmdState:[],f:s}},copyState:function(e){return{cmdState:e.cmdState.slice(),f:e.f}},token:function(e,t){return t.f(e,t)},lineComment:"%"}}),e.defineMIME("text/x-stex","stex"),e.defineMIME("text/x-latex","stex")});
