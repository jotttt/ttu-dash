!function(){function e(t){var r=e.modules[t];if(!r)throw new Error('failed to require "'+t+'"');return"exports"in r||"function"!=typeof r.definition||(r.client=r.component=!0,r.definition.call(this,r.exports={},r),delete r.definition),r.exports}e.modules={},e.register=function(t,r){e.modules[t]={definition:r}},e.define=function(t,r){e.modules[t]={exports:r}},e.register("component~emitter@1.1.2",function(e,t){function r(e){return e?i(e):void 0}function i(e){for(var t in r.prototype)e[t]=r.prototype[t];return e}t.exports=r,r.prototype.on=r.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks[e]=this._callbacks[e]||[]).push(t),this},r.prototype.once=function(e,t){function i(){r.off(e,i),t.apply(this,arguments)}var r=this;return this._callbacks=this._callbacks||{},i.fn=t,this.on(e,i),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var r=this._callbacks[e];if(!r)return this;if(1==arguments.length)return delete this._callbacks[e],this;for(var i,n=0;n<r.length;n++)if(i=r[n],i===t||i.fn===t){r.splice(n,1);break}return this},r.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),r=this._callbacks[e];if(r){r=r.slice(0);for(var i=0,n=r.length;n>i;++i)r[i].apply(this,t)}return this},r.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks[e]||[]},r.prototype.hasListeners=function(e){return!!this.listeners(e).length}}),e.register("dropzone",function(t,r){r.exports=e("dropzone/lib/dropzone.js")}),e.register("dropzone/lib/dropzone.js",function(t,r){(function(){var t,i,n,a,o,s,l,u,c={}.hasOwnProperty,f=function(e,t){function i(){this.constructor=e}for(var r in t)c.call(t,r)&&(e[r]=t[r]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},d=[].slice;i="undefined"!=typeof Emitter&&null!==Emitter?Emitter:e("component~emitter@1.1.2"),l=function(){},t=function(e){function r(e,i){var n,a,o;if(this.element=e,this.version=r.version,this.defaultOptions.previewTemplate=this.defaultOptions.previewTemplate.replace(/\n*/g,""),this.clickableElements=[],this.listeners=[],this.files=[],"string"==typeof this.element&&(this.element=document.querySelector(this.element)),!this.element||null==this.element.nodeType)throw new Error("Invalid dropzone element.");if(this.element.dropzone)throw new Error("Dropzone already attached.");if(r.instances.push(this),this.element.dropzone=this,n=null!=(o=r.optionsForElement(this.element))?o:{},this.options=t({},this.defaultOptions,n,null!=i?i:{}),this.options.forceFallback||!r.isBrowserSupported())return this.options.fallback.call(this);if(null==this.options.url&&(this.options.url=this.element.getAttribute("action")),!this.options.url)throw new Error("No URL provided.");if(this.options.acceptedFiles&&this.options.acceptedMimeTypes)throw new Error("You can't provide both 'acceptedFiles' and 'acceptedMimeTypes'. 'acceptedMimeTypes' is deprecated.");this.options.acceptedMimeTypes&&(this.options.acceptedFiles=this.options.acceptedMimeTypes,delete this.options.acceptedMimeTypes),this.options.method=this.options.method.toUpperCase(),(a=this.getExistingFallback())&&a.parentNode&&a.parentNode.removeChild(a),this.options.previewsContainer?this.previewsContainer=r.getElement(this.options.previewsContainer,"previewsContainer"):this.previewsContainer=this.element,this.options.clickable&&(this.options.clickable===!0?this.clickableElements=[this.element]:this.clickableElements=r.getElements(this.options.clickable,"clickable")),this.init()}var t;return f(r,e),r.prototype.events=["drop","dragstart","dragend","dragenter","dragover","dragleave","addedfile","removedfile","thumbnail","error","errormultiple","processing","processingmultiple","uploadprogress","totaluploadprogress","sending","sendingmultiple","success","successmultiple","canceled","canceledmultiple","complete","completemultiple","reset","maxfilesexceeded","maxfilesreached"],r.prototype.defaultOptions={url:null,method:"post",withCredentials:!1,parallelUploads:2,uploadMultiple:!1,maxFilesize:256,paramName:"file",createImageThumbnails:!0,maxThumbnailFilesize:10,thumbnailWidth:100,thumbnailHeight:100,maxFiles:null,params:{},clickable:!0,ignoreHiddenFiles:!0,acceptedFiles:null,acceptedMimeTypes:null,autoProcessQueue:!0,autoQueue:!0,addRemoveLinks:!1,previewsContainer:null,dictDefaultMessage:"Drop files here to upload",dictFallbackMessage:"Your browser does not support drag'n'drop file uploads.",dictFallbackText:"Please use the fallback form below to upload your files like in the olden days.",dictFileTooBig:"File is too big ({{filesize}}MiB). Max filesize: {{maxFilesize}}MiB.",dictInvalidFileType:"You can't upload files of this type.",dictResponseError:"Server responded with {{statusCode}} code.",dictCancelUpload:"Cancel upload",dictCancelUploadConfirmation:"Are you sure you want to cancel this upload?",dictRemoveFile:"Remove file",dictRemoveFileConfirmation:null,dictMaxFilesExceeded:"You can not upload any more files.",accept:function(e,t){return t()},init:function(){return l},forceFallback:!1,fallback:function(){var e,t,i,n,a,o;for(this.element.className=""+this.element.className+" dz-browser-not-supported",o=this.element.getElementsByTagName("div"),n=0,a=o.length;a>n;n++)e=o[n],/(^| )dz-message($| )/.test(e.className)&&(t=e,e.className="dz-message");return t||(t=r.createElement('<div class="dz-message"><span></span></div>'),this.element.appendChild(t)),i=t.getElementsByTagName("span")[0],i&&(i.textContent=this.options.dictFallbackMessage),this.element.appendChild(this.getFallbackForm())},resize:function(e){var t,r,i;return t={srcX:0,srcY:0,srcWidth:e.width,srcHeight:e.height},r=e.width/e.height,i=this.options.thumbnailWidth/this.options.thumbnailHeight,e.height<this.options.thumbnailHeight||e.width<this.options.thumbnailWidth?(t.trgHeight=t.srcHeight,t.trgWidth=t.srcWidth):r>i?(t.srcHeight=e.height,t.srcWidth=t.srcHeight*i):(t.srcWidth=e.width,t.srcHeight=t.srcWidth/i),t.srcX=(e.width-t.srcWidth)/2,t.srcY=(e.height-t.srcHeight)/2,t},drop:function(e){return this.element.classList.remove("dz-drag-hover")},dragstart:l,dragend:function(e){return this.element.classList.remove("dz-drag-hover")},dragenter:function(e){return this.element.classList.add("dz-drag-hover")},dragover:function(e){return this.element.classList.add("dz-drag-hover")},dragleave:function(e){return this.element.classList.remove("dz-drag-hover")},paste:l,reset:function(){return this.element.classList.remove("dz-started")},addedfile:function(e){var t,i,n,a,o,s,l,u,c,f,d,h,p;for(this.element===this.previewsContainer&&this.element.classList.add("dz-started"),e.previewElement=r.createElement(this.options.previewTemplate.trim()),e.previewTemplate=e.previewElement,this.previewsContainer.appendChild(e.previewElement),f=e.previewElement.querySelectorAll("[data-dz-name]"),a=0,l=f.length;l>a;a++)t=f[a],t.textContent=e.name;for(d=e.previewElement.querySelectorAll("[data-dz-size]"),o=0,u=d.length;u>o;o++)t=d[o],t.innerHTML=this.filesize(e.size);for(this.options.addRemoveLinks&&(e._removeLink=r.createElement('<a class="dz-remove" href="javascript:undefined;" data-dz-remove>'+this.options.dictRemoveFile+"</a>"),e.previewElement.appendChild(e._removeLink)),i=function(t){return function(i){return i.preventDefault(),i.stopPropagation(),e.status===r.UPLOADING?r.confirm(t.options.dictCancelUploadConfirmation,function(){return t.removeFile(e)}):t.options.dictRemoveFileConfirmation?r.confirm(t.options.dictRemoveFileConfirmation,function(){return t.removeFile(e)}):t.removeFile(e)}}(this),h=e.previewElement.querySelectorAll("[data-dz-remove]"),p=[],s=0,c=h.length;c>s;s++)n=h[s],p.push(n.addEventListener("click",i));return p},removedfile:function(e){var t;return null!=(t=e.previewElement)&&t.parentNode.removeChild(e.previewElement),this._updateMaxFilesReachedClass()},thumbnail:function(e,t){var r,i,n,a,o;for(e.previewElement.classList.remove("dz-file-preview"),e.previewElement.classList.add("dz-image-preview"),a=e.previewElement.querySelectorAll("[data-dz-thumbnail]"),o=[],i=0,n=a.length;n>i;i++)r=a[i],r.alt=e.name,o.push(r.src=t);return o},error:function(e,t){var r,i,n,a,o;for(e.previewElement.classList.add("dz-error"),"String"!=typeof t&&t.error&&(t=t.error),a=e.previewElement.querySelectorAll("[data-dz-errormessage]"),o=[],i=0,n=a.length;n>i;i++)r=a[i],o.push(r.textContent=t);return o},errormultiple:l,processing:function(e){return e.previewElement.classList.add("dz-processing"),e._removeLink?e._removeLink.textContent=this.options.dictCancelUpload:void 0},processingmultiple:l,uploadprogress:function(e,t,r){var i,n,a,o,s;for(o=e.previewElement.querySelectorAll("[data-dz-uploadprogress]"),s=[],n=0,a=o.length;a>n;n++)i=o[n],s.push(i.style.width=""+t+"%");return s},totaluploadprogress:l,sending:l,sendingmultiple:l,success:function(e){return e.previewElement.classList.add("dz-success")},successmultiple:l,canceled:function(e){return this.emit("error",e,"Upload canceled.")},canceledmultiple:l,complete:function(e){return e._removeLink?e._removeLink.textContent=this.options.dictRemoveFile:void 0},completemultiple:l,maxfilesexceeded:l,maxfilesreached:l,previewTemplate:'<div class="dz-preview dz-file-preview">\n  <div class="dz-details">\n    <div class="dz-filename"><span data-dz-name></span></div>\n    <div class="dz-size" data-dz-size></div>\n    <img data-dz-thumbnail />\n  </div>\n  <div class="dz-progress"><span class="dz-upload" data-dz-uploadprogress></span></div>\n  <div class="dz-success-mark"><span>✔</span></div>\n  <div class="dz-error-mark"><span>✘</span></div>\n  <div class="dz-error-message"><span data-dz-errormessage></span></div>\n</div>'},t=function(){var e,t,r,i,n,a,o;for(i=arguments[0],r=2<=arguments.length?d.call(arguments,1):[],a=0,o=r.length;o>a;a++){t=r[a];for(e in t)n=t[e],i[e]=n}return i},r.prototype.getAcceptedFiles=function(){var e,t,r,i,n;for(i=this.files,n=[],t=0,r=i.length;r>t;t++)e=i[t],e.accepted&&n.push(e);return n},r.prototype.getRejectedFiles=function(){var e,t,r,i,n;for(i=this.files,n=[],t=0,r=i.length;r>t;t++)e=i[t],e.accepted||n.push(e);return n},r.prototype.getFilesWithStatus=function(e){var t,r,i,n,a;for(n=this.files,a=[],r=0,i=n.length;i>r;r++)t=n[r],t.status===e&&a.push(t);return a},r.prototype.getQueuedFiles=function(){return this.getFilesWithStatus(r.QUEUED)},r.prototype.getUploadingFiles=function(){return this.getFilesWithStatus(r.UPLOADING)},r.prototype.getActiveFiles=function(){var e,t,i,n,a;for(n=this.files,a=[],t=0,i=n.length;i>t;t++)e=n[t],(e.status===r.UPLOADING||e.status===r.QUEUED)&&a.push(e);return a},r.prototype.init=function(){var e,t,i,n,a,o,s;for("form"===this.element.tagName&&this.element.setAttribute("enctype","multipart/form-data"),this.element.classList.contains("dropzone")&&!this.element.querySelector(".dz-message")&&this.element.appendChild(r.createElement('<div class="dz-default dz-message"><span>'+this.options.dictDefaultMessage+"</span></div>")),this.clickableElements.length&&(i=function(e){return function(){return e.hiddenFileInput&&document.body.removeChild(e.hiddenFileInput),e.hiddenFileInput=document.createElement("input"),e.hiddenFileInput.setAttribute("type","file"),(null==e.options.maxFiles||e.options.maxFiles>1)&&e.hiddenFileInput.setAttribute("multiple","multiple"),e.hiddenFileInput.className="dz-hidden-input",null!=e.options.acceptedFiles&&e.hiddenFileInput.setAttribute("accept",e.options.acceptedFiles),e.hiddenFileInput.style.visibility="hidden",e.hiddenFileInput.style.position="absolute",e.hiddenFileInput.style.top="0",e.hiddenFileInput.style.left="0",e.hiddenFileInput.style.height="0",e.hiddenFileInput.style.width="0",document.body.appendChild(e.hiddenFileInput),e.hiddenFileInput.addEventListener("change",function(){var t,r,n,a;if(r=e.hiddenFileInput.files,r.length)for(n=0,a=r.length;a>n;n++)t=r[n],e.addFile(t);return i()})}}(this))(),this.URL=null!=(o=window.URL)?o:window.webkitURL,s=this.events,n=0,a=s.length;a>n;n++)e=s[n],this.on(e,this.options[e]);return this.on("uploadprogress",function(e){return function(){return e.updateTotalUploadProgress()}}(this)),this.on("removedfile",function(e){return function(){return e.updateTotalUploadProgress()}}(this)),this.on("canceled",function(e){return function(t){return e.emit("complete",t)}}(this)),this.on("complete",function(e){return function(t){return 0===e.getUploadingFiles().length&&0===e.getQueuedFiles().length?setTimeout(function(){return e.emit("queuecomplete")},0):void 0}}(this)),t=function(e){return e.stopPropagation(),e.preventDefault?e.preventDefault():e.returnValue=!1},this.listeners=[{element:this.element,events:{dragstart:function(e){return function(t){return e.emit("dragstart",t)}}(this),dragenter:function(e){return function(r){return t(r),e.emit("dragenter",r)}}(this),dragover:function(e){return function(r){var i;try{i=r.dataTransfer.effectAllowed}catch(n){}return r.dataTransfer.dropEffect="move"===i||"linkMove"===i?"move":"copy",t(r),e.emit("dragover",r)}}(this),dragleave:function(e){return function(t){return e.emit("dragleave",t)}}(this),drop:function(e){return function(r){return t(r),e.drop(r)}}(this),dragend:function(e){return function(t){return e.emit("dragend",t)}}(this)}}],this.clickableElements.forEach(function(e){return function(t){return e.listeners.push({element:t,events:{click:function(i){return t!==e.element||i.target===e.element||r.elementInside(i.target,e.element.querySelector(".dz-message"))?e.hiddenFileInput.click():void 0}}})}}(this)),this.enable(),this.options.init.call(this)},r.prototype.destroy=function(){var e;return this.disable(),this.removeAllFiles(!0),(null!=(e=this.hiddenFileInput)?e.parentNode:void 0)&&(this.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput),this.hiddenFileInput=null),delete this.element.dropzone,r.instances.splice(r.instances.indexOf(this),1)},r.prototype.updateTotalUploadProgress=function(){var e,t,r,i,n,a,o,s;if(i=0,r=0,e=this.getActiveFiles(),e.length){for(s=this.getActiveFiles(),a=0,o=s.length;o>a;a++)t=s[a],i+=t.upload.bytesSent,r+=t.upload.total;n=100*i/r}else n=100;return this.emit("totaluploadprogress",n,r,i)},r.prototype.getFallbackForm=function(){var e,t,i,n;return(e=this.getExistingFallback())?e:(i='<div class="dz-fallback">',this.options.dictFallbackText&&(i+="<p>"+this.options.dictFallbackText+"</p>"),i+='<input type="file" name="'+this.options.paramName+(this.options.uploadMultiple?"[]":"")+'" '+(this.options.uploadMultiple?'multiple="multiple"':void 0)+' /><input type="submit" value="Upload!"></div>',t=r.createElement(i),"FORM"!==this.element.tagName?(n=r.createElement('<form action="'+this.options.url+'" enctype="multipart/form-data" method="'+this.options.method+'"></form>'),n.appendChild(t)):(this.element.setAttribute("enctype","multipart/form-data"),this.element.setAttribute("method",this.options.method)),null!=n?n:t)},r.prototype.getExistingFallback=function(){var e,t,r,i,n,a;for(t=function(e){var t,r,i;for(r=0,i=e.length;i>r;r++)if(t=e[r],/(^| )fallback($| )/.test(t.className))return t},a=["div","form"],i=0,n=a.length;n>i;i++)if(r=a[i],e=t(this.element.getElementsByTagName(r)))return e},r.prototype.setupEventListeners=function(){var e,t,r,i,n,a,o;for(a=this.listeners,o=[],i=0,n=a.length;n>i;i++)e=a[i],o.push(function(){var i,n;i=e.events,n=[];for(t in i)r=i[t],n.push(e.element.addEventListener(t,r,!1));return n}());return o},r.prototype.removeEventListeners=function(){var e,t,r,i,n,a,o;for(a=this.listeners,o=[],i=0,n=a.length;n>i;i++)e=a[i],o.push(function(){var i,n;i=e.events,n=[];for(t in i)r=i[t],n.push(e.element.removeEventListener(t,r,!1));return n}());return o},r.prototype.disable=function(){var e,t,r,i,n;for(this.clickableElements.forEach(function(e){return e.classList.remove("dz-clickable")}),this.removeEventListeners(),i=this.files,n=[],t=0,r=i.length;r>t;t++)e=i[t],n.push(this.cancelUpload(e));return n},r.prototype.enable=function(){return this.clickableElements.forEach(function(e){return e.classList.add("dz-clickable")}),this.setupEventListeners()},r.prototype.filesize=function(e){var t;return e>=109951162777.6?(e/=109951162777.6,t="TiB"):e>=107374182.4?(e/=107374182.4,t="GiB"):e>=104857.6?(e/=104857.6,t="MiB"):e>=102.4?(e/=102.4,t="KiB"):(e=10*e,t="b"),"<strong>"+Math.round(e)/10+"</strong> "+t},r.prototype._updateMaxFilesReachedClass=function(){return null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(this.getAcceptedFiles().length===this.options.maxFiles&&this.emit("maxfilesreached",this.files),this.element.classList.add("dz-max-files-reached")):this.element.classList.remove("dz-max-files-reached")},r.prototype.drop=function(e){var t,r;e.dataTransfer&&(this.emit("drop",e),t=e.dataTransfer.files,t.length&&(r=e.dataTransfer.items,r&&r.length&&null!=r[0].webkitGetAsEntry?this._addFilesFromItems(r):this.handleFiles(t)))},r.prototype.paste=function(e){var t,r;if(null!=(null!=e&&null!=(r=e.clipboardData)?r.items:void 0))return this.emit("paste",e),t=e.clipboardData.items,t.length?this._addFilesFromItems(t):void 0},r.prototype.handleFiles=function(e){var t,r,i,n;for(n=[],r=0,i=e.length;i>r;r++)t=e[r],n.push(this.addFile(t));return n},r.prototype._addFilesFromItems=function(e){var t,r,i,n,a;for(a=[],i=0,n=e.length;n>i;i++)r=e[i],null!=r.webkitGetAsEntry&&(t=r.webkitGetAsEntry())?t.isFile?a.push(this.addFile(r.getAsFile())):t.isDirectory?a.push(this._addFilesFromDirectory(t,t.name)):a.push(void 0):null!=r.getAsFile&&(null==r.kind||"file"===r.kind)?a.push(this.addFile(r.getAsFile())):a.push(void 0);return a},r.prototype._addFilesFromDirectory=function(e,t){var r,i;return r=e.createReader(),i=function(e){return function(r){var i,n,a;for(n=0,a=r.length;a>n;n++)i=r[n],i.isFile?i.file(function(r){return e.options.ignoreHiddenFiles&&"."===r.name.substring(0,1)?void 0:(r.fullPath=""+t+"/"+r.name,e.addFile(r))}):i.isDirectory&&e._addFilesFromDirectory(i,""+t+"/"+i.name)}}(this),r.readEntries(i,function(e){return"undefined"!=typeof console&&null!==console&&"function"==typeof console.log?console.log(e):void 0})},r.prototype.accept=function(e,t){return e.size>1024*this.options.maxFilesize*1024?t(this.options.dictFileTooBig.replace("{{filesize}}",Math.round(e.size/1024/10.24)/100).replace("{{maxFilesize}}",this.options.maxFilesize)):r.isValidFile(e,this.options.acceptedFiles)?null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(t(this.options.dictMaxFilesExceeded.replace("{{maxFiles}}",this.options.maxFiles)),this.emit("maxfilesexceeded",e)):this.options.accept.call(this,e,t):t(this.options.dictInvalidFileType)},r.prototype.addFile=function(e){return e.upload={progress:0,total:e.size,bytesSent:0},this.files.push(e),e.status=r.ADDED,this.emit("addedfile",e),this._enqueueThumbnail(e),this.accept(e,function(t){return function(r){return r?(e.accepted=!1,t._errorProcessing([e],r)):(e.accepted=!0,t.options.autoQueue&&t.enqueueFile(e)),t._updateMaxFilesReachedClass()}}(this))},r.prototype.enqueueFiles=function(e){var t,r,i;for(r=0,i=e.length;i>r;r++)t=e[r],this.enqueueFile(t);return null},r.prototype.enqueueFile=function(e){if(e.status!==r.ADDED||e.accepted!==!0)throw new Error("This file can't be queued because it has already been processed or was rejected.");return e.status=r.QUEUED,this.options.autoProcessQueue?setTimeout(function(e){return function(){return e.processQueue()}}(this),0):void 0},r.prototype._thumbnailQueue=[],r.prototype._processingThumbnail=!1,r.prototype._enqueueThumbnail=function(e){return this.options.createImageThumbnails&&e.type.match(/image.*/)&&e.size<=1024*this.options.maxThumbnailFilesize*1024?(this._thumbnailQueue.push(e),setTimeout(function(e){return function(){return e._processThumbnailQueue()}}(this),0)):void 0},r.prototype._processThumbnailQueue=function(){return this._processingThumbnail||0===this._thumbnailQueue.length?void 0:(this._processingThumbnail=!0,this.createThumbnail(this._thumbnailQueue.shift(),function(e){return function(){return e._processingThumbnail=!1,e._processThumbnailQueue()}}(this)))},r.prototype.removeFile=function(e){return e.status===r.UPLOADING&&this.cancelUpload(e),this.files=u(this.files,e),this.emit("removedfile",e),0===this.files.length?this.emit("reset"):void 0},r.prototype.removeAllFiles=function(e){var t,i,n,a;for(null==e&&(e=!1),a=this.files.slice(),i=0,n=a.length;n>i;i++)t=a[i],(t.status!==r.UPLOADING||e)&&this.removeFile(t);return null},r.prototype.createThumbnail=function(e,t){var r;return r=new FileReader,r.onload=function(i){return function(){var n;return n=document.createElement("img"),n.onload=function(){var r,a,o,l,u,c,f,d;return e.width=n.width,e.height=n.height,o=i.options.resize.call(i,e),null==o.trgWidth&&(o.trgWidth=i.options.thumbnailWidth),null==o.trgHeight&&(o.trgHeight=i.options.thumbnailHeight),r=document.createElement("canvas"),a=r.getContext("2d"),r.width=o.trgWidth,r.height=o.trgHeight,s(a,n,null!=(u=o.srcX)?u:0,null!=(c=o.srcY)?c:0,o.srcWidth,o.srcHeight,null!=(f=o.trgX)?f:0,null!=(d=o.trgY)?d:0,o.trgWidth,o.trgHeight),l=r.toDataURL("image/png"),i.emit("thumbnail",e,l),null!=t?t():void 0},n.src=r.result}}(this),r.readAsDataURL(e)},r.prototype.processQueue=function(){var e,t,r,i;if(t=this.options.parallelUploads,r=this.getUploadingFiles().length,e=r,!(r>=t)&&(i=this.getQueuedFiles(),i.length>0)){if(this.options.uploadMultiple)return this.processFiles(i.slice(0,t-r));for(;t>e;){if(!i.length)return;this.processFile(i.shift()),e++}}},r.prototype.processFile=function(e){return this.processFiles([e])},r.prototype.processFiles=function(e){var t,i,n;for(i=0,n=e.length;n>i;i++)t=e[i],t.processing=!0,t.status=r.UPLOADING,this.emit("processing",t);return this.options.uploadMultiple&&this.emit("processingmultiple",e),this.uploadFiles(e)},r.prototype._getFilesWithXhr=function(e){var t,r;return r=function(){var r,i,n,a;for(n=this.files,a=[],r=0,i=n.length;i>r;r++)t=n[r],t.xhr===e&&a.push(t);return a}.call(this)},r.prototype.cancelUpload=function(e){var t,i,n,a,o,s,l;if(e.status===r.UPLOADING){for(i=this._getFilesWithXhr(e.xhr),n=0,o=i.length;o>n;n++)t=i[n],t.status=r.CANCELED;for(e.xhr.abort(),a=0,s=i.length;s>a;a++)t=i[a],this.emit("canceled",t);this.options.uploadMultiple&&this.emit("canceledmultiple",i)}else((l=e.status)===r.ADDED||l===r.QUEUED)&&(e.status=r.CANCELED,this.emit("canceled",e),this.options.uploadMultiple&&this.emit("canceledmultiple",[e]));return this.options.autoProcessQueue?this.processQueue():void 0},r.prototype.uploadFile=function(e){return this.uploadFiles([e])},r.prototype.uploadFiles=function(e){var i,n,a,o,s,l,u,c,f,d,h,p,m,g,v,y,b,x,w,k,_,S,j,T,C,E,Q,D,M,A,N;for(y=new XMLHttpRequest,b=0,_=e.length;_>b;b++)i=e[b],i.xhr=y;y.open(this.options.method,this.options.url,!0),y.withCredentials=!!this.options.withCredentials,m=null,a=function(t){return function(){var r,n,a;for(a=[],r=0,n=e.length;n>r;r++)i=e[r],a.push(t._errorProcessing(e,m||t.options.dictResponseError.replace("{{statusCode}}",y.status),y));return a}}(this),g=function(t){return function(r){var n,a,o,s,l,u,c,f,d;if(null!=r)for(a=100*r.loaded/r.total,o=0,u=e.length;u>o;o++)i=e[o],i.upload={progress:a,total:r.total,bytesSent:r.loaded};else{for(n=!0,a=100,s=0,c=e.length;c>s;s++)i=e[s],(100!==i.upload.progress||i.upload.bytesSent!==i.upload.total)&&(n=!1),i.upload.progress=a,i.upload.bytesSent=i.upload.total;if(n)return}for(d=[],l=0,f=e.length;f>l;l++)i=e[l],d.push(t.emit("uploadprogress",i,a,i.upload.bytesSent));return d}}(this),y.onload=function(t){return function(i){var n;if(e[0].status!==r.CANCELED&&4===y.readyState){if(m=y.responseText,y.getResponseHeader("content-type")&&~y.getResponseHeader("content-type").indexOf("application/json"))try{m=JSON.parse(m)}catch(o){i=o,m="Invalid JSON response from server."}return g(),200<=(n=y.status)&&300>n?t._finished(e,m,i):a()}}}(this),y.onerror=function(t){return function(){return e[0].status!==r.CANCELED?a():void 0}}(this),p=null!=(Q=y.upload)?Q:y,p.onprogress=g,l={Accept:"application/json","Cache-Control":"no-cache","X-Requested-With":"XMLHttpRequest"},this.options.headers&&t(l,this.options.headers);for(o in l)s=l[o],y.setRequestHeader(o,s);if(n=new FormData,this.options.params){D=this.options.params;for(d in D)v=D[d],n.append(d,v)}for(x=0,S=e.length;S>x;x++)i=e[x],this.emit("sending",i,y,n);if(this.options.uploadMultiple&&this.emit("sendingmultiple",e,y,n),"FORM"===this.element.tagName)for(M=this.element.querySelectorAll("input, textarea, select, button"),w=0,j=M.length;j>w;w++)if(u=M[w],c=u.getAttribute("name"),f=u.getAttribute("type"),"SELECT"===u.tagName&&u.hasAttribute("multiple"))for(A=u.options,k=0,T=A.length;T>k;k++)h=A[k],h.selected&&n.append(c,h.value);else(!f||"checkbox"!==(N=f.toLowerCase())&&"radio"!==N||u.checked)&&n.append(c,u.value);for(E=0,C=e.length;C>E;E++)i=e[E],n.append(""+this.options.paramName+(this.options.uploadMultiple?"[]":""),i,i.name);return y.send(n)},r.prototype._finished=function(e,t,i){var n,a,o;for(a=0,o=e.length;o>a;a++)n=e[a],n.status=r.SUCCESS,this.emit("success",n,t,i),this.emit("complete",n);return this.options.uploadMultiple&&(this.emit("successmultiple",e,t,i),this.emit("completemultiple",e)),this.options.autoProcessQueue?this.processQueue():void 0},r.prototype._errorProcessing=function(e,t,i){var n,a,o;for(a=0,o=e.length;o>a;a++)n=e[a],n.status=r.ERROR,this.emit("error",n,t,i),this.emit("complete",n);return this.options.uploadMultiple&&(this.emit("errormultiple",e,t,i),this.emit("completemultiple",e)),this.options.autoProcessQueue?this.processQueue():void 0},r}(i),t.version="3.8.7",t.options={},t.optionsForElement=function(e){return e.getAttribute("id")?t.options[n(e.getAttribute("id"))]:void 0},t.instances=[],t.forElement=function(e){if("string"==typeof e&&(e=document.querySelector(e)),null==(null!=e?e.dropzone:void 0))throw new Error("No Dropzone found for given element. This is probably because you're trying to access it before Dropzone had the time to initialize. Use the `init` option to setup any additional observers on your Dropzone.");return e.dropzone},t.autoDiscover=!0,t.discover=function(){var e,r,i,n,a,o;for(document.querySelectorAll?i=document.querySelectorAll(".dropzone"):(i=[],e=function(e){var t,r,n,a;for(a=[],r=0,n=e.length;n>r;r++)t=e[r],/(^| )dropzone($| )/.test(t.className)?a.push(i.push(t)):a.push(void 0);return a},e(document.getElementsByTagName("div")),e(document.getElementsByTagName("form"))),o=[],n=0,a=i.length;a>n;n++)r=i[n],t.optionsForElement(r)!==!1?o.push(new t(r)):o.push(void 0);return o},t.blacklistedBrowsers=[/opera.*Macintosh.*version\/12/i],t.isBrowserSupported=function(){var e,r,i,n,a;if(e=!0,window.File&&window.FileReader&&window.FileList&&window.Blob&&window.FormData&&document.querySelector)if("classList"in document.createElement("a"))for(a=t.blacklistedBrowsers,i=0,n=a.length;n>i;i++)r=a[i],r.test(navigator.userAgent)&&(e=!1);else e=!1;else e=!1;return e},u=function(e,t){var r,i,n,a;for(a=[],i=0,n=e.length;n>i;i++)r=e[i],r!==t&&a.push(r);return a},n=function(e){return e.replace(/[\-_](\w)/g,function(e){return e.charAt(1).toUpperCase()})},t.createElement=function(e){var t;return t=document.createElement("div"),t.innerHTML=e,t.childNodes[0]},t.elementInside=function(e,t){if(e===t)return!0;for(;e=e.parentNode;)if(e===t)return!0;return!1},t.getElement=function(e,t){var r;if("string"==typeof e?r=document.querySelector(e):null!=e.nodeType&&(r=e),null==r)throw new Error("Invalid `"+t+"` option provided. Please provide a CSS selector or a plain HTML element.");return r},t.getElements=function(e,t){var r,i,n,a,o,s,l,u;if(e instanceof Array){n=[];try{for(a=0,s=e.length;s>a;a++)i=e[a],n.push(this.getElement(i,t))}catch(c){r=c,n=null}}else if("string"==typeof e)for(n=[],u=document.querySelectorAll(e),o=0,l=u.length;l>o;o++)i=u[o],n.push(i);else null!=e.nodeType&&(n=[e]);if(null==n||!n.length)throw new Error("Invalid `"+t+"` option provided. Please provide a CSS selector, a plain HTML element or a list of those.");return n},t.confirm=function(e,t,r){return window.confirm(e)?t():null!=r?r():void 0},t.isValidFile=function(e,t){var r,i,n,a,o;if(!t)return!0;for(t=t.split(","),i=e.type,r=i.replace(/\/.*$/,""),a=0,o=t.length;o>a;a++)if(n=t[a],n=n.trim(),"."===n.charAt(0)){if(-1!==e.name.toLowerCase().indexOf(n.toLowerCase(),e.name.length-n.length))return!0}else if(/\/\*$/.test(n)){if(r===n.replace(/\/.*$/,""))return!0}else if(i===n)return!0;return!1},"undefined"!=typeof jQuery&&null!==jQuery&&(jQuery.fn.dropzone=function(e){return this.each(function(){return new t(this,e)})}),"undefined"!=typeof r&&null!==r?r.exports=t:window.Dropzone=t,t.ADDED="added",t.QUEUED="queued",t.ACCEPTED=t.QUEUED,t.UPLOADING="uploading",t.PROCESSING=t.UPLOADING,t.CANCELED="canceled",t.ERROR="error",t.SUCCESS="success",o=function(e){var t,r,i,n,a,o,s,l,u,c;for(s=e.naturalWidth,o=e.naturalHeight,r=document.createElement("canvas"),r.width=1,r.height=o,i=r.getContext("2d"),i.drawImage(e,0,0),n=i.getImageData(0,0,1,o).data,c=0,a=o,l=o;l>c;)t=n[4*(l-1)+3],0===t?a=l:c=l,l=a+c>>1;return u=l/o,0===u?1:u},s=function(e,t,r,i,n,a,s,l,u,c){var f;return f=o(t),e.drawImage(t,r,i,n,a,s,l,u,c/f)},a=function(e,t){var r,i,n,a,o,s,l,u,c;if(n=!1,c=!0,i=e.document,u=i.documentElement,r=i.addEventListener?"addEventListener":"attachEvent",l=i.addEventListener?"removeEventListener":"detachEvent",s=i.addEventListener?"":"on",a=function(r){return"readystatechange"!==r.type||"complete"===i.readyState?(("load"===r.type?e:i)[l](s+r.type,a,!1),!n&&(n=!0)?t.call(e,r.type||r):void 0):void 0},o=function(){var e;try{u.doScroll("left")}catch(t){return e=t,void setTimeout(o,50)}return a("poll")},"complete"!==i.readyState){if(i.createEventObject&&u.doScroll){try{c=!e.frameElement}catch(f){}c&&o()}return i[r](s+"DOMContentLoaded",a,!1),i[r](s+"readystatechange",a,!1),e[r](s+"load",a,!1)}},t._autoDiscoverFunction=function(){return t.autoDiscover?t.discover():void 0},a(window,t._autoDiscoverFunction)}).call(this)}),"object"==typeof exports?module.exports=e("dropzone"):"function"==typeof define&&define.amd?define([],function(){return e("dropzone")}):this.Dropzone=e("dropzone")}();
