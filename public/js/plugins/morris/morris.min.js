(function(){var e,t,i,r,n=[].slice,a=function(e,t){return function(){return e.apply(t,arguments)}},l={}.hasOwnProperty,o=function(e,t){function r(){this.constructor=e}for(var i in t)l.call(t,i)&&(e[i]=t[i]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},s=[].indexOf||function(e){for(var t=0,i=this.length;i>t;t++)if(t in this&&this[t]===e)return t;return-1};t=window.Morris={},e=jQuery,t.EventEmitter=function(){function e(){}return e.prototype.on=function(e,t){return null==this.handlers&&(this.handlers={}),null==this.handlers[e]&&(this.handlers[e]=[]),this.handlers[e].push(t),this},e.prototype.fire=function(){var e,t,i,r,a,l,o;if(i=arguments[0],e=2<=arguments.length?n.call(arguments,1):[],null!=this.handlers&&null!=this.handlers[i]){for(l=this.handlers[i],o=[],r=0,a=l.length;a>r;r++)t=l[r],o.push(t.apply(null,e));return o}},e}(),t.commas=function(e){var t,i,r,n;return null!=e?(r=0>e?"-":"",t=Math.abs(e),i=Math.floor(t).toFixed(0),r+=i.replace(/(?=(?:\d{3})+$)(?!^)/g,","),n=t.toString(),n.length>i.length&&(r+=n.slice(i.length)),r):"-"},t.pad2=function(e){return(10>e?"0":"")+e},t.Grid=function(i){function r(t){this.resizeHandler=a(this.resizeHandler,this);var i=this;if("string"==typeof t.element?this.el=e(document.getElementById(t.element)):this.el=e(t.element),null==this.el||0===this.el.length)throw new Error("Graph container element not found");"static"===this.el.css("position")&&this.el.css("position","relative"),this.options=e.extend({},this.gridDefaults,this.defaults||{},t),"string"==typeof this.options.units&&(this.options.postUnits=t.units),this.raphael=new Raphael(this.el[0]),this.elementWidth=null,this.elementHeight=null,this.dirty=!1,this.selectFrom=null,this.init&&this.init(),this.setData(this.options.data),this.el.bind("mousemove",function(e){var t,r,n,a,l;return r=i.el.offset(),l=e.pageX-r.left,i.selectFrom?(t=i.data[i.hitTest(Math.min(l,i.selectFrom))]._x,n=i.data[i.hitTest(Math.max(l,i.selectFrom))]._x,a=n-t,i.selectionRect.attr({x:t,width:a})):i.fire("hovermove",l,e.pageY-r.top)}),this.el.bind("mouseleave",function(e){return i.selectFrom&&(i.selectionRect.hide(),i.selectFrom=null),i.fire("hoverout")}),this.el.bind("touchstart touchmove touchend",function(e){var t,r;return r=e.originalEvent.touches[0]||e.originalEvent.changedTouches[0],t=i.el.offset(),i.fire("hovermove",r.pageX-t.left,r.pageY-t.top)}),this.el.bind("click",function(e){var t;return t=i.el.offset(),i.fire("gridclick",e.pageX-t.left,e.pageY-t.top)}),this.options.rangeSelect&&(this.selectionRect=this.raphael.rect(0,0,0,this.el.innerHeight()).attr({fill:this.options.rangeSelectColor,stroke:!1}).toBack().hide(),this.el.bind("mousedown",function(e){var t;return t=i.el.offset(),i.startRange(e.pageX-t.left)}),this.el.bind("mouseup",function(e){var t;return t=i.el.offset(),i.endRange(e.pageX-t.left),i.fire("hovermove",e.pageX-t.left,e.pageY-t.top)})),this.options.resize&&e(window).bind("resize",function(e){return null!=i.timeoutId&&window.clearTimeout(i.timeoutId),i.timeoutId=window.setTimeout(i.resizeHandler,100)}),this.el.css("-webkit-tap-highlight-color","rgba(0,0,0,0)"),this.postInit&&this.postInit()}return o(r,i),r.prototype.gridDefaults={dateFormat:null,axes:!0,grid:!0,gridLineColor:"#aaa",gridStrokeWidth:.5,gridTextColor:"#888",gridTextSize:12,gridTextFamily:"sans-serif",gridTextWeight:"normal",hideHover:!1,yLabelFormat:null,xLabelAngle:0,numLines:5,padding:25,parseTime:!0,postUnits:"",preUnits:"",ymax:"auto",ymin:"auto 0",goals:[],goalStrokeWidth:1,goalLineColors:["#666633","#999966","#cc6666","#663333"],events:[],eventStrokeWidth:1,eventLineColors:["#005a04","#ccffbb","#3a5f0b","#005502"],rangeSelect:null,rangeSelectColor:"#eef",resize:!1},r.prototype.setData=function(e,i){var r,n,a,l,o,s,u,c,f,d,h,p,m,g,v;return null==i&&(i=!0),this.options.data=e,null==e||0===e.length?(this.data=[],this.raphael.clear(),void(null!=this.hover&&this.hover.hide())):(p=this.cumulative?0:null,m=this.cumulative?0:null,this.options.goals.length>0&&(o=Math.min.apply(Math,this.options.goals),l=Math.max.apply(Math,this.options.goals),m=null!=m?Math.min(m,o):o,p=null!=p?Math.max(p,l):l),this.data=function(){var i,r,l;for(l=[],a=i=0,r=e.length;r>i;a=++i)u=e[a],s={src:u},s.label=u[this.options.xkey],this.options.parseTime?(s.x=t.parseDate(s.label),this.options.dateFormat?s.label=this.options.dateFormat(s.x):"number"==typeof s.label&&(s.label=new Date(s.label).toString())):(s.x=a,this.options.xLabelFormat&&(s.label=this.options.xLabelFormat(s))),f=0,s.y=function(){var e,t,i,r;for(i=this.options.ykeys,r=[],n=e=0,t=i.length;t>e;n=++e)h=i[n],g=u[h],"string"==typeof g&&(g=parseFloat(g)),null!=g&&"number"!=typeof g&&(g=null),null!=g&&(this.cumulative?f+=g:null!=p?(p=Math.max(g,p),m=Math.min(g,m)):p=m=g),this.cumulative&&null!=f&&(p=Math.max(f,p),m=Math.min(f,m)),r.push(g);return r}.call(this),l.push(s);return l}.call(this),this.options.parseTime&&(this.data=this.data.sort(function(e,t){return(e.x>t.x)-(t.x>e.x)})),this.xmin=this.data[0].x,this.xmax=this.data[this.data.length-1].x,this.events=[],this.options.events.length>0&&(this.options.parseTime?this.events=function(){var e,i,n,a;for(n=this.options.events,a=[],e=0,i=n.length;i>e;e++)r=n[e],a.push(t.parseDate(r));return a}.call(this):this.events=this.options.events,this.xmax=Math.max(this.xmax,Math.max.apply(Math,this.events)),this.xmin=Math.min(this.xmin,Math.min.apply(Math,this.events))),this.xmin===this.xmax&&(this.xmin-=1,this.xmax+=1),this.ymin=this.yboundary("min",m),this.ymax=this.yboundary("max",p),this.ymin===this.ymax&&(m&&(this.ymin-=1),this.ymax+=1),((v=this.options.axes)===!0||"both"===v||"y"===v||this.options.grid===!0)&&(this.options.ymax===this.gridDefaults.ymax&&this.options.ymin===this.gridDefaults.ymin?(this.grid=this.autoGridLines(this.ymin,this.ymax,this.options.numLines),this.ymin=Math.min(this.ymin,this.grid[0]),this.ymax=Math.max(this.ymax,this.grid[this.grid.length-1])):(c=(this.ymax-this.ymin)/(this.options.numLines-1),this.grid=function(){var e,t,i,r;for(r=[],d=e=t=this.ymin,i=this.ymax;c>0?i>=e:e>=i;d=e+=c)r.push(d);return r}.call(this))),this.dirty=!0,i?this.redraw():void 0)},r.prototype.yboundary=function(e,t){var i,r;return i=this.options["y"+e],"string"==typeof i?"auto"===i.slice(0,4)?i.length>5?(r=parseInt(i.slice(5),10),null==t?r:Math[e](t,r)):null!=t?t:0:parseInt(i,10):i},r.prototype.autoGridLines=function(e,t,i){var r,n,a,l,o,s,u,c,f;return o=t-e,f=Math.floor(Math.log(o)/Math.log(10)),u=Math.pow(10,f),n=Math.floor(e/u)*u,r=Math.ceil(t/u)*u,s=(r-n)/(i-1),1===u&&s>1&&Math.ceil(s)!==s&&(s=Math.ceil(s),r=n+s*(i-1)),0>n&&r>0&&(n=Math.floor(e/s)*s,r=Math.ceil(t/s)*s),1>s?(l=Math.floor(Math.log(s)/Math.log(10)),a=function(){var e,t;for(t=[],c=e=n;s>0?r>=e:e>=r;c=e+=s)t.push(parseFloat(c.toFixed(1-l)));return t}()):a=function(){var e,t;for(t=[],c=e=n;s>0?r>=e:e>=r;c=e+=s)t.push(c);return t}(),a},r.prototype._calc=function(){var e,t,i,r,n,a,l,o;return n=this.el.width(),i=this.el.height(),(this.elementWidth!==n||this.elementHeight!==i||this.dirty)&&(this.elementWidth=n,this.elementHeight=i,this.dirty=!1,this.left=this.options.padding,this.right=this.elementWidth-this.options.padding,this.top=this.options.padding,this.bottom=this.elementHeight-this.options.padding,((l=this.options.axes)===!0||"both"===l||"y"===l)&&(a=function(){var e,i,r,n;for(r=this.grid,n=[],e=0,i=r.length;i>e;e++)t=r[e],n.push(this.measureText(this.yAxisFormat(t)).width);return n}.call(this),this.left+=Math.max.apply(Math,a)),((o=this.options.axes)===!0||"both"===o||"x"===o)&&(e=function(){var e,t,i;for(i=[],r=e=0,t=this.data.length;t>=0?t>e:e>t;r=t>=0?++e:--e)i.push(this.measureText(this.data[r].text,-this.options.xLabelAngle).height);return i}.call(this),this.bottom-=Math.max.apply(Math,e)),this.width=Math.max(1,this.right-this.left),this.height=Math.max(1,this.bottom-this.top),this.dx=this.width/(this.xmax-this.xmin),this.dy=this.height/(this.ymax-this.ymin),this.calc)?this.calc():void 0},r.prototype.transY=function(e){return this.bottom-(e-this.ymin)*this.dy},r.prototype.transX=function(e){return 1===this.data.length?(this.left+this.right)/2:this.left+(e-this.xmin)*this.dx},r.prototype.redraw=function(){return this.raphael.clear(),this._calc(),this.drawGrid(),this.drawGoals(),this.drawEvents(),this.draw?this.draw():void 0},r.prototype.measureText=function(e,t){var i,r;return null==t&&(t=0),r=this.raphael.text(100,100,e).attr("font-size",this.options.gridTextSize).attr("font-family",this.options.gridTextFamily).attr("font-weight",this.options.gridTextWeight).rotate(t),i=r.getBBox(),r.remove(),i},r.prototype.yAxisFormat=function(e){return this.yLabelFormat(e)},r.prototype.yLabelFormat=function(e){return"function"==typeof this.options.yLabelFormat?this.options.yLabelFormat(e):""+this.options.preUnits+t.commas(e)+this.options.postUnits},r.prototype.drawGrid=function(){var e,t,i,r,n,a,l,o;if(this.options.grid!==!1||(n=this.options.axes)===!0||"both"===n||"y"===n){for(a=this.grid,o=[],i=0,r=a.length;r>i;i++)e=a[i],t=this.transY(e),((l=this.options.axes)===!0||"both"===l||"y"===l)&&this.drawYAxisLabel(this.left-this.options.padding/2,t,this.yAxisFormat(e)),this.options.grid?o.push(this.drawGridLine("M"+this.left+","+t+"H"+(this.left+this.width))):o.push(void 0);return o}},r.prototype.drawGoals=function(){var e,t,i,r,n,a,l;for(a=this.options.goals,l=[],i=r=0,n=a.length;n>r;i=++r)t=a[i],e=this.options.goalLineColors[i%this.options.goalLineColors.length],l.push(this.drawGoal(t,e));return l},r.prototype.drawEvents=function(){var e,t,i,r,n,a,l;for(a=this.events,l=[],i=r=0,n=a.length;n>r;i=++r)t=a[i],e=this.options.eventLineColors[i%this.options.eventLineColors.length],l.push(this.drawEvent(t,e));return l},r.prototype.drawGoal=function(e,t){return this.raphael.path("M"+this.left+","+this.transY(e)+"H"+this.right).attr("stroke",t).attr("stroke-width",this.options.goalStrokeWidth)},r.prototype.drawEvent=function(e,t){return this.raphael.path("M"+this.transX(e)+","+this.bottom+"V"+this.top).attr("stroke",t).attr("stroke-width",this.options.eventStrokeWidth)},r.prototype.drawYAxisLabel=function(e,t,i){return this.raphael.text(e,t,i).attr("font-size",this.options.gridTextSize).attr("font-family",this.options.gridTextFamily).attr("font-weight",this.options.gridTextWeight).attr("fill",this.options.gridTextColor).attr("text-anchor","end")},r.prototype.drawGridLine=function(e){return this.raphael.path(e).attr("stroke",this.options.gridLineColor).attr("stroke-width",this.options.gridStrokeWidth)},r.prototype.startRange=function(e){return this.hover.hide(),this.selectFrom=e,this.selectionRect.attr({x:e,width:0}).show()},r.prototype.endRange=function(e){var t,i;return this.selectFrom?(i=Math.min(this.selectFrom,e),t=Math.max(this.selectFrom,e),this.options.rangeSelect.call(this.el,{start:this.data[this.hitTest(i)].x,end:this.data[this.hitTest(t)].x}),this.selectFrom=null):void 0},r.prototype.resizeHandler=function(){return this.timeoutId=null,this.raphael.setSize(this.el.width(),this.el.height()),this.redraw()},r}(t.EventEmitter),t.parseDate=function(e){var t,i,r,n,a,l,o,s,u,c,f;return"number"==typeof e?e:(i=e.match(/^(\d+) Q(\d)$/),n=e.match(/^(\d+)-(\d+)$/),a=e.match(/^(\d+)-(\d+)-(\d+)$/),o=e.match(/^(\d+) W(\d+)$/),s=e.match(/^(\d+)-(\d+)-(\d+)[ T](\d+):(\d+)(Z|([+-])(\d\d):?(\d\d))?$/),u=e.match(/^(\d+)-(\d+)-(\d+)[ T](\d+):(\d+):(\d+(\.\d+)?)(Z|([+-])(\d\d):?(\d\d))?$/),i?new Date(parseInt(i[1],10),3*parseInt(i[2],10)-1,1).getTime():n?new Date(parseInt(n[1],10),parseInt(n[2],10)-1,1).getTime():a?new Date(parseInt(a[1],10),parseInt(a[2],10)-1,parseInt(a[3],10)).getTime():o?(c=new Date(parseInt(o[1],10),0,1),4!==c.getDay()&&c.setMonth(0,1+(4-c.getDay()+7)%7),c.getTime()+6048e5*parseInt(o[2],10)):s?s[6]?(l=0,"Z"!==s[6]&&(l=60*parseInt(s[8],10)+parseInt(s[9],10),"+"===s[7]&&(l=0-l)),Date.UTC(parseInt(s[1],10),parseInt(s[2],10)-1,parseInt(s[3],10),parseInt(s[4],10),parseInt(s[5],10)+l)):new Date(parseInt(s[1],10),parseInt(s[2],10)-1,parseInt(s[3],10),parseInt(s[4],10),parseInt(s[5],10)).getTime():u?(f=parseFloat(u[6]),t=Math.floor(f),r=Math.round(1e3*(f-t)),u[8]?(l=0,"Z"!==u[8]&&(l=60*parseInt(u[10],10)+parseInt(u[11],10),"+"===u[9]&&(l=0-l)),Date.UTC(parseInt(u[1],10),parseInt(u[2],10)-1,parseInt(u[3],10),parseInt(u[4],10),parseInt(u[5],10)+l,t,r)):new Date(parseInt(u[1],10),parseInt(u[2],10)-1,parseInt(u[3],10),parseInt(u[4],10),parseInt(u[5],10),t,r).getTime()):new Date(parseInt(e,10),0,1).getTime())},t.Hover=function(){function i(i){null==i&&(i={}),this.options=e.extend({},t.Hover.defaults,i),this.el=e("<div class='"+this.options["class"]+"'></div>"),this.el.hide(),this.options.parent.append(this.el)}return i.defaults={"class":"morris-hover morris-default-style"},i.prototype.update=function(e,t,i){return e?(this.html(e),this.show(),this.moveTo(t,i)):this.hide()},i.prototype.html=function(e){return this.el.html(e)},i.prototype.moveTo=function(e,t){var i,r,n,a,l,o;return l=this.options.parent.innerWidth(),a=this.options.parent.innerHeight(),r=this.el.outerWidth(),i=this.el.outerHeight(),n=Math.min(Math.max(0,e-r/2),l-r),null!=t?(o=t-i-10,0>o&&(o=t+10,o+i>a&&(o=a/2-i/2))):o=a/2-i/2,this.el.css({left:n+"px",top:parseInt(o)+"px"})},i.prototype.show=function(){return this.el.show()},i.prototype.hide=function(){return this.el.hide()},i}(),t.Line=function(e){function i(e){return this.hilight=a(this.hilight,this),this.onHoverOut=a(this.onHoverOut,this),this.onHoverMove=a(this.onHoverMove,this),this.onGridClick=a(this.onGridClick,this),this instanceof t.Line?void i.__super__.constructor.call(this,e):new t.Line(e)}return o(i,e),i.prototype.init=function(){return"always"!==this.options.hideHover?(this.hover=new t.Hover({parent:this.el}),this.on("hovermove",this.onHoverMove),this.on("hoverout",this.onHoverOut),this.on("gridclick",this.onGridClick)):void 0},i.prototype.defaults={lineWidth:3,pointSize:4,lineColors:["#0b62a4","#7A92A3","#4da74d","#afd8f8","#edc240","#cb4b4b","#9440ed"],pointStrokeWidths:[1],pointStrokeColors:["#ffffff"],pointFillColors:[],smooth:!0,xLabels:"auto",xLabelFormat:null,xLabelMargin:24,hideHover:!1},i.prototype.calc=function(){return this.calcPoints(),this.generatePaths()},i.prototype.calcPoints=function(){var e,t,i,r,n,a;for(n=this.data,a=[],i=0,r=n.length;r>i;i++)e=n[i],e._x=this.transX(e.x),e._y=function(){var i,r,n,a;for(n=e.y,a=[],i=0,r=n.length;r>i;i++)t=n[i],null!=t?a.push(this.transY(t)):a.push(t);return a}.call(this),a.push(e._ymax=Math.min.apply(Math,[this.bottom].concat(function(){var i,r,n,a;for(n=e._y,a=[],i=0,r=n.length;r>i;i++)t=n[i],null!=t&&a.push(t);return a}())));return a},i.prototype.hitTest=function(e){var t,i,r,n,a;if(0===this.data.length)return null;for(a=this.data.slice(1),t=r=0,n=a.length;n>r&&(i=a[t],!(e<(i._x+this.data[t]._x)/2));t=++r);return t},i.prototype.onGridClick=function(e,t){var i;return i=this.hitTest(e),this.fire("click",i,this.data[i].src,e,t)},i.prototype.onHoverMove=function(e,t){var i;return i=this.hitTest(e),this.displayHoverForRow(i)},i.prototype.onHoverOut=function(){return this.options.hideHover!==!1?this.displayHoverForRow(null):void 0},i.prototype.displayHoverForRow=function(e){var t;return null!=e?((t=this.hover).update.apply(t,this.hoverContentForRow(e)),this.hilight(e)):(this.hover.hide(),this.hilight())},i.prototype.hoverContentForRow=function(e){var t,i,r,n,a,l,o;for(r=this.data[e],t="<div class='morris-hover-row-label'>"+r.label+"</div>",o=r.y,i=a=0,l=o.length;l>a;i=++a)n=o[i],t+="<div class='morris-hover-point' style='color: "+this.colorFor(r,i,"label")+"'>\n  "+this.options.labels[i]+":\n  "+this.yLabelFormat(n)+"\n</div>";return"function"==typeof this.options.hoverCallback&&(t=this.options.hoverCallback(e,this.options,t,r.src)),[t,r._x,r._ymax]},i.prototype.generatePaths=function(){var e,i,r,n;return this.paths=function(){var a,l,o,u;for(u=[],i=a=0,l=this.options.ykeys.length;l>=0?l>a:a>l;i=l>=0?++a:--a)n="boolean"==typeof this.options.smooth?this.options.smooth:(o=this.options.ykeys[i],s.call(this.options.smooth,o)>=0),e=function(){var e,t,n,a;for(n=this.data,a=[],e=0,t=n.length;t>e;e++)r=n[e],void 0!==r._y[i]&&a.push({x:r._x,y:r._y[i]});return a}.call(this),e.length>1?u.push(t.Line.createPath(e,n,this.bottom)):u.push(null);return u}.call(this)},i.prototype.draw=function(){var e;return((e=this.options.axes)===!0||"both"===e||"x"===e)&&this.drawXAxis(),this.drawSeries(),this.options.hideHover===!1?this.displayHoverForRow(this.data.length-1):void 0},i.prototype.drawXAxis=function(){var e,i,r,n,a,l,o,s,u,c,f=this;for(o=this.bottom+this.options.padding/2,a=null,n=null,e=function(e,t){var i,r,l,s,u;return i=f.drawXAxisLabel(f.transX(t),o,e),u=i.getBBox(),i.transform("r"+-f.options.xLabelAngle),r=i.getBBox(),i.transform("t0,"+r.height/2+"..."),0!==f.options.xLabelAngle&&(s=-.5*u.width*Math.cos(f.options.xLabelAngle*Math.PI/180),i.transform("t"+s+",0...")),r=i.getBBox(),(null==a||a>=r.x+r.width||null!=n&&n>=r.x)&&r.x>=0&&r.x+r.width<f.el.width()?(0!==f.options.xLabelAngle&&(l=1.25*f.options.gridTextSize/Math.sin(f.options.xLabelAngle*Math.PI/180),n=r.x-l),a=r.x-f.options.xLabelMargin):i.remove()},r=this.options.parseTime?1===this.data.length&&"auto"===this.options.xLabels?[[this.data[0].label,this.data[0].x]]:t.labelSeries(this.xmin,this.xmax,this.width,this.options.xLabels,this.options.xLabelFormat):function(){var e,t,i,r;for(i=this.data,r=[],e=0,t=i.length;t>e;e++)l=i[e],r.push([l.label,l.x]);return r}.call(this),r.reverse(),c=[],s=0,u=r.length;u>s;s++)i=r[s],c.push(e(i[0],i[1]));return c},i.prototype.drawSeries=function(){var e,t,i,r,n,a;for(this.seriesPoints=[],e=t=r=this.options.ykeys.length-1;0>=r?0>=t:t>=0;e=0>=r?++t:--t)this._drawLineFor(e);for(a=[],e=i=n=this.options.ykeys.length-1;0>=n?0>=i:i>=0;e=0>=n?++i:--i)a.push(this._drawPointFor(e));return a},i.prototype._drawPointFor=function(e){var t,i,r,n,a,l;for(this.seriesPoints[e]=[],a=this.data,l=[],r=0,n=a.length;n>r;r++)i=a[r],t=null,null!=i._y[e]&&(t=this.drawLinePoint(i._x,i._y[e],this.colorFor(i,e,"point"),e)),l.push(this.seriesPoints[e].push(t));return l},i.prototype._drawLineFor=function(e){var t;return t=this.paths[e],null!==t?this.drawLinePath(t,this.colorFor(null,e,"line"),e):void 0},i.createPath=function(e,i,r){var n,a,l,o,s,u,c,f,d,h,p,m,g,v;for(c="",i&&(l=t.Line.gradients(e)),f={y:null},o=g=0,v=e.length;v>g;o=++g)n=e[o],null!=n.y&&(null!=f.y?i?(a=l[o],u=l[o-1],s=(n.x-f.x)/4,d=f.x+s,p=Math.min(r,f.y+s*u),h=n.x-s,m=Math.min(r,n.y-s*a),c+="C"+d+","+p+","+h+","+m+","+n.x+","+n.y):c+="L"+n.x+","+n.y:i&&null==l[o]||(c+="M"+n.x+","+n.y)),f=n;return c},i.gradients=function(e){var t,i,r,n,a,l,o,s;for(i=function(e,t){return(e.y-t.y)/(e.x-t.x)},s=[],r=l=0,o=e.length;o>l;r=++l)t=e[r],null!=t.y?(n=e[r+1]||{y:null},a=e[r-1]||{y:null},null!=a.y&&null!=n.y?s.push(i(a,n)):null!=a.y?s.push(i(a,t)):null!=n.y?s.push(i(t,n)):s.push(null)):s.push(null);return s},i.prototype.hilight=function(e){var t,i,r,n,a;if(null!==this.prevHilight&&this.prevHilight!==e)for(t=i=0,n=this.seriesPoints.length-1;n>=0?n>=i:i>=n;t=n>=0?++i:--i)this.seriesPoints[t][this.prevHilight]&&this.seriesPoints[t][this.prevHilight].animate(this.pointShrinkSeries(t));if(null!==e&&this.prevHilight!==e)for(t=r=0,a=this.seriesPoints.length-1;a>=0?a>=r:r>=a;t=a>=0?++r:--r)this.seriesPoints[t][e]&&this.seriesPoints[t][e].animate(this.pointGrowSeries(t));return this.prevHilight=e},i.prototype.colorFor=function(e,t,i){return"function"==typeof this.options.lineColors?this.options.lineColors.call(this,e,t,i):"point"===i?this.options.pointFillColors[t%this.options.pointFillColors.length]||this.options.lineColors[t%this.options.lineColors.length]:this.options.lineColors[t%this.options.lineColors.length]},i.prototype.drawXAxisLabel=function(e,t,i){return this.raphael.text(e,t,i).attr("font-size",this.options.gridTextSize).attr("font-family",this.options.gridTextFamily).attr("font-weight",this.options.gridTextWeight).attr("fill",this.options.gridTextColor)},i.prototype.drawLinePath=function(e,t,i){return this.raphael.path(e).attr("stroke",t).attr("stroke-width",this.lineWidthForSeries(i))},i.prototype.drawLinePoint=function(e,t,i,r){return this.raphael.circle(e,t,this.pointSizeForSeries(r)).attr("fill",i).attr("stroke-width",this.pointStrokeWidthForSeries(r)).attr("stroke",this.pointStrokeColorForSeries(r))},i.prototype.pointStrokeWidthForSeries=function(e){return this.options.pointStrokeWidths[e%this.options.pointStrokeWidths.length]},i.prototype.pointStrokeColorForSeries=function(e){return this.options.pointStrokeColors[e%this.options.pointStrokeColors.length]},i.prototype.lineWidthForSeries=function(e){return this.options.lineWidth instanceof Array?this.options.lineWidth[e%this.options.lineWidth.length]:this.options.lineWidth},i.prototype.pointSizeForSeries=function(e){return this.options.pointSize instanceof Array?this.options.pointSize[e%this.options.pointSize.length]:this.options.pointSize},i.prototype.pointGrowSeries=function(e){return Raphael.animation({r:this.pointSizeForSeries(e)+3},25,"linear")},i.prototype.pointShrinkSeries=function(e){return Raphael.animation({r:this.pointSizeForSeries(e)},25,"linear")},i}(t.Grid),t.labelSeries=function(i,r,n,a,l){var o,s,u,c,f,d,h,p,m,g,v;if(u=200*(r-i)/n,s=new Date(i),h=t.LABEL_SPECS[a],void 0===h)for(v=t.AUTO_LABEL_ORDER,m=0,g=v.length;g>m;m++)if(c=v[m],d=t.LABEL_SPECS[c],u>=d.span){h=d;break}for(void 0===h&&(h=t.LABEL_SPECS.second),l&&(h=e.extend({},h,{fmt:l})),o=h.start(s),f=[];(p=o.getTime())<=r;)p>=i&&f.push([h.fmt(o),p]),h.incr(o);return f},i=function(e){return{span:60*e*1e3,start:function(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours())},fmt:function(e){return""+t.pad2(e.getHours())+":"+t.pad2(e.getMinutes())},incr:function(t){return t.setUTCMinutes(t.getUTCMinutes()+e)}}},r=function(e){return{span:1e3*e,start:function(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes())},fmt:function(e){return""+t.pad2(e.getHours())+":"+t.pad2(e.getMinutes())+":"+t.pad2(e.getSeconds())},incr:function(t){return t.setUTCSeconds(t.getUTCSeconds()+e)}}},t.LABEL_SPECS={decade:{span:1728e8,start:function(e){return new Date(e.getFullYear()-e.getFullYear()%10,0,1)},fmt:function(e){return""+e.getFullYear()},incr:function(e){return e.setFullYear(e.getFullYear()+10)}},year:{span:1728e7,start:function(e){return new Date(e.getFullYear(),0,1)},fmt:function(e){return""+e.getFullYear()},incr:function(e){return e.setFullYear(e.getFullYear()+1)}},month:{span:24192e5,start:function(e){return new Date(e.getFullYear(),e.getMonth(),1)},fmt:function(e){return""+e.getFullYear()+"-"+t.pad2(e.getMonth()+1)},incr:function(e){return e.setMonth(e.getMonth()+1)}},week:{span:6048e5,start:function(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate())},fmt:function(e){return""+e.getFullYear()+"-"+t.pad2(e.getMonth()+1)+"-"+t.pad2(e.getDate())},incr:function(e){return e.setDate(e.getDate()+7)}},day:{span:864e5,start:function(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate())},fmt:function(e){return""+e.getFullYear()+"-"+t.pad2(e.getMonth()+1)+"-"+t.pad2(e.getDate())},incr:function(e){return e.setDate(e.getDate()+1)}},hour:i(60),"30min":i(30),"15min":i(15),"10min":i(10),"5min":i(5),minute:i(1),"30sec":r(30),"15sec":r(15),"10sec":r(10),"5sec":r(5),second:r(1)},t.AUTO_LABEL_ORDER=["decade","year","month","week","day","hour","30min","15min","10min","5min","minute","30sec","15sec","10sec","5sec","second"],t.Area=function(i){function n(i){var a;return this instanceof t.Area?(a=e.extend({},r,i),this.cumulative=!a.behaveLikeLine,"auto"===a.fillOpacity&&(a.fillOpacity=a.behaveLikeLine?.8:1),void n.__super__.constructor.call(this,a)):new t.Area(i)}var r;return o(n,i),r={fillOpacity:"auto",behaveLikeLine:!1},n.prototype.calcPoints=function(){var e,t,i,r,n,a,l;for(a=this.data,l=[],r=0,n=a.length;n>r;r++)e=a[r],e._x=this.transX(e.x),t=0,e._y=function(){var r,n,a,l;for(a=e.y,l=[],r=0,n=a.length;n>r;r++)i=a[r],this.options.behaveLikeLine?l.push(this.transY(i)):(t+=i||0,l.push(this.transY(t)));return l}.call(this),l.push(e._ymax=Math.max.apply(Math,e._y));return l},n.prototype.drawSeries=function(){var e,t,n,a,o,s,u,c;for(this.seriesPoints=[],t=this.options.behaveLikeLine?function(){s=[];for(var e=0,t=this.options.ykeys.length-1;t>=0?t>=e:e>=t;t>=0?e++:e--)s.push(e);return s}.apply(this):function(){u=[];for(var e=o=this.options.ykeys.length-1;0>=o?0>=e:e>=0;0>=o?e++:e--)u.push(e);return u}.apply(this),c=[],n=0,a=t.length;a>n;n++)e=t[n],this._drawFillFor(e),this._drawLineFor(e),c.push(this._drawPointFor(e));return c},n.prototype._drawFillFor=function(e){var t;return t=this.paths[e],null!==t?(t+="L"+this.transX(this.xmax)+","+this.bottom+"L"+this.transX(this.xmin)+","+this.bottom+"Z",this.drawFilledPath(t,this.fillForSeries(e))):void 0},n.prototype.fillForSeries=function(e){var t;return t=Raphael.rgb2hsl(this.colorFor(this.data[e],e,"line")),Raphael.hsl(t.h,this.options.behaveLikeLine?.9*t.s:.75*t.s,Math.min(.98,this.options.behaveLikeLine?1.2*t.l:1.25*t.l))},n.prototype.drawFilledPath=function(e,t){return this.raphael.path(e).attr("fill",t).attr("fill-opacity",this.options.fillOpacity).attr("stroke","none")},n}(t.Line),t.Bar=function(i){function r(i){return this.onHoverOut=a(this.onHoverOut,this),this.onHoverMove=a(this.onHoverMove,this),this.onGridClick=a(this.onGridClick,this),this instanceof t.Bar?void r.__super__.constructor.call(this,e.extend({},i,{parseTime:!1})):new t.Bar(i)}return o(r,i),r.prototype.init=function(){return this.cumulative=this.options.stacked,"always"!==this.options.hideHover?(this.hover=new t.Hover({parent:this.el}),this.on("hovermove",this.onHoverMove),this.on("hoverout",this.onHoverOut),this.on("gridclick",this.onGridClick)):void 0},r.prototype.defaults={barSizeRatio:.75,barGap:3,barColors:["#0b62a4","#7a92a3","#4da74d","#afd8f8","#edc240","#cb4b4b","#9440ed"],barOpacity:1,barRadius:[0,0,0,0],xLabelMargin:50},r.prototype.calc=function(){var e;return this.calcBars(),this.options.hideHover===!1?(e=this.hover).update.apply(e,this.hoverContentForRow(this.data.length-1)):void 0},r.prototype.calcBars=function(){var e,t,i,r,n,a,l;for(a=this.data,l=[],e=r=0,n=a.length;n>r;e=++r)t=a[e],t._x=this.left+this.width*(e+.5)/this.data.length,l.push(t._y=function(){var e,r,n,a;for(n=t.y,a=[],e=0,r=n.length;r>e;e++)i=n[e],null!=i?a.push(this.transY(i)):a.push(null);return a}.call(this));return l},r.prototype.draw=function(){var e;return((e=this.options.axes)===!0||"both"===e||"x"===e)&&this.drawXAxis(),this.drawSeries()},r.prototype.drawXAxis=function(){var e,t,i,r,n,a,l,o,s,u,c,f,d;for(u=this.bottom+(this.options.xAxisLabelTopPadding||this.options.padding/2),l=null,a=null,d=[],e=c=0,f=this.data.length;f>=0?f>c:c>f;e=f>=0?++c:--c)o=this.data[this.data.length-1-e],t=this.drawXAxisLabel(o._x,u,o.label),s=t.getBBox(),t.transform("r"+-this.options.xLabelAngle),i=t.getBBox(),t.transform("t0,"+i.height/2+"..."),0!==this.options.xLabelAngle&&(n=-.5*s.width*Math.cos(this.options.xLabelAngle*Math.PI/180),t.transform("t"+n+",0...")),(null==l||l>=i.x+i.width||null!=a&&a>=i.x)&&i.x>=0&&i.x+i.width<this.el.width()?(0!==this.options.xLabelAngle&&(r=1.25*this.options.gridTextSize/Math.sin(this.options.xLabelAngle*Math.PI/180),a=i.x-r),d.push(l=i.x-this.options.xLabelMargin)):d.push(t.remove());return d},r.prototype.drawSeries=function(){var e,t,i,r,n,a,l,o,s,u,c,f,d,h,p;return i=this.width/this.options.data.length,o=this.options.stacked?1:this.options.ykeys.length,e=(i*this.options.barSizeRatio-this.options.barGap*(o-1))/o,this.options.barSize&&(e=Math.min(e,this.options.barSize)),f=i-e*o-this.options.barGap*(o-1),l=f/2,p=this.ymin<=0&&this.ymax>=0?this.transY(0):null,this.bars=function(){var o,f,m,g;for(m=this.data,g=[],r=o=0,f=m.length;f>o;r=++o)s=m[r],n=0,g.push(function(){var o,f,m,g;for(m=s._y,g=[],u=o=0,f=m.length;f>o;u=++o)h=m[u],null!==h?(p?(d=Math.min(h,p),t=Math.max(h,p)):(d=h,t=this.bottom),a=this.left+r*i+l,this.options.stacked||(a+=u*(e+this.options.barGap)),c=t-d,this.options.verticalGridCondition&&this.options.verticalGridCondition(s.x)&&this.drawBar(this.left+r*i,this.top,i,Math.abs(this.top-this.bottom),this.options.verticalGridColor,this.options.verticalGridOpacity,this.options.barRadius),this.options.stacked&&(d-=n),this.drawBar(a,d,e,c,this.colorFor(s,u,"bar"),this.options.barOpacity,this.options.barRadius),g.push(n+=c)):g.push(null);return g}.call(this));return g}.call(this)},r.prototype.colorFor=function(e,t,i){var r,n;return"function"==typeof this.options.barColors?(r={x:e.x,y:e.y[t],label:e.label},n={index:t,key:this.options.ykeys[t],label:this.options.labels[t]},this.options.barColors.call(this,r,n,i)):this.options.barColors[t%this.options.barColors.length]},r.prototype.hitTest=function(e){return 0===this.data.length?null:(e=Math.max(Math.min(e,this.right),this.left),Math.min(this.data.length-1,Math.floor((e-this.left)/(this.width/this.data.length))))},r.prototype.onGridClick=function(e,t){var i;return i=this.hitTest(e),this.fire("click",i,this.data[i].src,e,t)},r.prototype.onHoverMove=function(e,t){var i,r;return i=this.hitTest(e),(r=this.hover).update.apply(r,this.hoverContentForRow(i))},r.prototype.onHoverOut=function(){return this.options.hideHover!==!1?this.hover.hide():void 0},r.prototype.hoverContentForRow=function(e){var t,i,r,n,a,l,o,s;for(r=this.data[e],t="<div class='morris-hover-row-label'>"+r.label+"</div>",s=r.y,i=l=0,o=s.length;o>l;i=++l)a=s[i],t+="<div class='morris-hover-point' style='color: "+this.colorFor(r,i,"label")+"'>\n  "+this.options.labels[i]+":\n  "+this.yLabelFormat(a)+"\n</div>";return"function"==typeof this.options.hoverCallback&&(t=this.options.hoverCallback(e,this.options,t,r.src)),n=this.left+(e+.5)*this.width/this.data.length,[t,n]},r.prototype.drawXAxisLabel=function(e,t,i){var r;return r=this.raphael.text(e,t,i).attr("font-size",this.options.gridTextSize).attr("font-family",this.options.gridTextFamily).attr("font-weight",this.options.gridTextWeight).attr("fill",this.options.gridTextColor)},r.prototype.drawBar=function(e,t,i,r,n,a,l){var o,s;return o=Math.max.apply(Math,l),s=0===o||o>r?this.raphael.rect(e,t,i,r):this.raphael.path(this.roundedRect(e,t,i,r,l)),s.attr("fill",n).attr("fill-opacity",a).attr("stroke","none")},r.prototype.roundedRect=function(e,t,i,r,n){return null==n&&(n=[0,0,0,0]),["M",e,n[0]+t,"Q",e,t,e+n[0],t,"L",e+i-n[1],t,"Q",e+i,t,e+i,t+n[1],"L",e+i,t+r-n[2],"Q",e+i,t+r,e+i-n[2],t+r,"L",e+n[3],t+r,"Q",e,t+r,e,t+r-n[3],"Z"]},r}(t.Grid),t.Donut=function(i){function r(i){this.resizeHandler=a(this.resizeHandler,this),this.select=a(this.select,this),this.click=a(this.click,this);var r=this;if(!(this instanceof t.Donut))return new t.Donut(i);if(this.options=e.extend({},this.defaults,i),"string"==typeof i.element?this.el=e(document.getElementById(i.element)):this.el=e(i.element),null===this.el||0===this.el.length)throw new Error("Graph placeholder not found.");void 0!==i.data&&0!==i.data.length&&(this.raphael=new Raphael(this.el[0]),this.options.resize&&e(window).bind("resize",function(e){return null!=r.timeoutId&&window.clearTimeout(r.timeoutId),r.timeoutId=window.setTimeout(r.resizeHandler,100)}),this.setData(i.data))}return o(r,i),r.prototype.defaults={colors:["#0B62A4","#3980B5","#679DC6","#95BBD7","#B0CCE1","#095791","#095085","#083E67","#052C48","#042135"],backgroundColor:"#FFFFFF",labelColor:"#000000",formatter:t.commas,resize:!1},r.prototype.redraw=function(){var e,i,r,n,a,l,o,s,u,c,f,d,h,p,m,g,v,y,b,x,w,k,_;for(this.raphael.clear(),i=this.el.width()/2,r=this.el.height()/2,h=(Math.min(i,r)-10)/3,f=0,x=this.values,p=0,v=x.length;v>p;p++)d=x[p],f+=d;for(s=5/(2*h),e=1.9999*Math.PI-s*this.data.length,l=0,a=0,this.segments=[],w=this.values,n=m=0,y=w.length;y>m;n=++m)d=w[n],u=l+s+e*(d/f),c=new t.DonutSegment(i,r,2*h,h,l,u,this.data[n].color||this.options.colors[a%this.options.colors.length],this.options.backgroundColor,a,this.raphael),c.render(),this.segments.push(c),c.on("hover",this.select),c.on("click",this.click),l=u,a+=1;for(this.text1=this.drawEmptyDonutLabel(i,r-10,this.options.labelColor,15,800),
this.text2=this.drawEmptyDonutLabel(i,r+10,this.options.labelColor,14),o=Math.max.apply(Math,this.values),a=0,k=this.values,_=[],g=0,b=k.length;b>g;g++){if(d=k[g],d===o){this.select(a);break}_.push(a+=1)}return _},r.prototype.setData=function(e){var t;return this.data=e,this.values=function(){var e,i,r,n;for(r=this.data,n=[],e=0,i=r.length;i>e;e++)t=r[e],n.push(parseFloat(t.value));return n}.call(this),this.redraw()},r.prototype.click=function(e){return this.fire("click",e,this.data[e])},r.prototype.select=function(e){var t,i,r,n,a,l;for(l=this.segments,n=0,a=l.length;a>n;n++)i=l[n],i.deselect();return r=this.segments[e],r.select(),t=this.data[e],this.setLabels(t.label,this.options.formatter(t.value,t))},r.prototype.setLabels=function(e,t){var i,r,n,a,l,o,s,u;return i=2*(Math.min(this.el.width()/2,this.el.height()/2)-10)/3,a=1.8*i,n=i/2,r=i/3,this.text1.attr({text:e,transform:""}),l=this.text1.getBBox(),o=Math.min(a/l.width,n/l.height),this.text1.attr({transform:"S"+o+","+o+","+(l.x+l.width/2)+","+(l.y+l.height)}),this.text2.attr({text:t,transform:""}),s=this.text2.getBBox(),u=Math.min(a/s.width,r/s.height),this.text2.attr({transform:"S"+u+","+u+","+(s.x+s.width/2)+","+s.y})},r.prototype.drawEmptyDonutLabel=function(e,t,i,r,n){var a;return a=this.raphael.text(e,t,"").attr("font-size",r).attr("fill",i),null!=n&&a.attr("font-weight",n),a},r.prototype.resizeHandler=function(){return this.timeoutId=null,this.raphael.setSize(this.el.width(),this.el.height()),this.redraw()},r}(t.EventEmitter),t.DonutSegment=function(e){function t(e,t,i,r,n,l,o,s,u,c){this.cx=e,this.cy=t,this.inner=i,this.outer=r,this.color=o,this.backgroundColor=s,this.index=u,this.raphael=c,this.deselect=a(this.deselect,this),this.select=a(this.select,this),this.sin_p0=Math.sin(n),this.cos_p0=Math.cos(n),this.sin_p1=Math.sin(l),this.cos_p1=Math.cos(l),this.is_long=l-n>Math.PI?1:0,this.path=this.calcSegment(this.inner+3,this.inner+this.outer-5),this.selectedPath=this.calcSegment(this.inner+3,this.inner+this.outer),this.hilight=this.calcArc(this.inner)}return o(t,e),t.prototype.calcArcPoints=function(e){return[this.cx+e*this.sin_p0,this.cy+e*this.cos_p0,this.cx+e*this.sin_p1,this.cy+e*this.cos_p1]},t.prototype.calcSegment=function(e,t){var i,r,n,a,l,o,s,u,c,f;return c=this.calcArcPoints(e),i=c[0],n=c[1],r=c[2],a=c[3],f=this.calcArcPoints(t),l=f[0],s=f[1],o=f[2],u=f[3],"M"+i+","+n+("A"+e+","+e+",0,"+this.is_long+",0,"+r+","+a)+("L"+o+","+u)+("A"+t+","+t+",0,"+this.is_long+",1,"+l+","+s)+"Z"},t.prototype.calcArc=function(e){var t,i,r,n,a;return a=this.calcArcPoints(e),t=a[0],r=a[1],i=a[2],n=a[3],"M"+t+","+r+("A"+e+","+e+",0,"+this.is_long+",0,"+i+","+n)},t.prototype.render=function(){var e=this;return this.arc=this.drawDonutArc(this.hilight,this.color),this.seg=this.drawDonutSegment(this.path,this.color,this.backgroundColor,function(){return e.fire("hover",e.index)},function(){return e.fire("click",e.index)})},t.prototype.drawDonutArc=function(e,t){return this.raphael.path(e).attr({stroke:t,"stroke-width":2,opacity:0})},t.prototype.drawDonutSegment=function(e,t,i,r,n){return this.raphael.path(e).attr({fill:t,stroke:i,"stroke-width":3}).hover(r).click(n)},t.prototype.select=function(){return this.selected?void 0:(this.seg.animate({path:this.selectedPath},150,"<>"),this.arc.animate({opacity:1},150,"<>"),this.selected=!0)},t.prototype.deselect=function(){return this.selected?(this.seg.animate({path:this.path},150,"<>"),this.arc.animate({opacity:0},150,"<>"),this.selected=!1):void 0},t}(t.EventEmitter)}).call(this);
