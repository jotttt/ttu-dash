!function(e,t){"function"==typeof define&&define.amd?define("typeahead.js",["jquery"],function(e){return t(e)}):"object"==typeof exports?module.exports=t(require("jquery")):t(jQuery)}(this,function(e){var t=function(){"use strict";return{isMsie:function(){return/(msie|trident)/i.test(navigator.userAgent)?navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]:!1},isBlankString:function(e){return!e||/^\s*$/.test(e)},escapeRegExChars:function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isArray:e.isArray,isFunction:e.isFunction,isObject:e.isPlainObject,isUndefined:function(e){return"undefined"==typeof e},isElement:function(e){return!(!e||1!==e.nodeType)},isJQuery:function(t){return t instanceof e},toStr:function(e){return t.isUndefined(e)||null===e?"":e+""},bind:e.proxy,each:function(t,i){function r(e,t){return i(t,e)}e.each(t,r)},map:e.map,filter:e.grep,every:function(t,i){var r=!0;return t?(e.each(t,function(e,n){return(r=i.call(null,n,e,t))?void 0:!1}),!!r):r},some:function(t,i){var r=!1;return t?(e.each(t,function(e,n){return(r=i.call(null,n,e,t))?!1:void 0}),!!r):r},mixin:e.extend,identity:function(e){return e},clone:function(t){return e.extend(!0,{},t)},getIdGenerator:function(){var e=0;return function(){return e++}},templatify:function(t){function i(){return String(t)}return e.isFunction(t)?t:i},defer:function(e){setTimeout(e,0)},debounce:function(e,t,i){var r,n;return function(){var l,s,a=this,o=arguments;return l=function(){r=null,i||(n=e.apply(a,o))},s=i&&!r,clearTimeout(r),r=setTimeout(l,t),s&&(n=e.apply(a,o)),n}},throttle:function(e,t){var i,r,n,a,o,l;return o=0,l=function(){o=new Date,n=null,a=e.apply(i,r)},function(){var s=new Date,u=t-(s-o);return i=this,r=arguments,0>=u?(clearTimeout(n),n=null,o=s,a=e.apply(i,r)):n||(n=setTimeout(l,u)),a}},stringify:function(e){return t.isString(e)?e:JSON.stringify(e)},noop:function(){}}}(),i=function(){"use strict";function i(i){var o,l;return l=t.mixin({},e,i),o={css:a(),classes:l,html:r(l),selectors:n(l)},{css:o.css,html:o.html,classes:o.classes,selectors:o.selectors,mixin:function(e){t.mixin(e,o)}}}function r(e){return{wrapper:'<span class="'+e.wrapper+'"></span>',menu:'<div class="'+e.menu+'"></div>'}}function n(e){var i={};return t.each(e,function(e,t){i[t]="."+e}),i}function a(){var e={wrapper:{position:"relative",display:"inline-block"},hint:{position:"absolute",top:"0",left:"0",borderColor:"transparent",boxShadow:"none",opacity:"1"},input:{position:"relative",verticalAlign:"top",backgroundColor:"transparent"},inputWithNoHint:{position:"relative",verticalAlign:"top"},menu:{position:"absolute",top:"100%",left:"0",zIndex:"100",display:"none"},ltr:{left:"0",right:"auto"},rtl:{left:"auto",right:" 0"}};return t.isMsie()&&t.mixin(e.input,{backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"}),e}var e={wrapper:"twitter-typeahead",input:"tt-input",hint:"tt-hint",menu:"tt-menu",dataset:"tt-dataset",suggestion:"tt-suggestion",selectable:"tt-selectable",empty:"tt-empty",open:"tt-open",cursor:"tt-cursor",highlight:"tt-highlight"};return i}(),r=function(){"use strict";function n(t){t&&t.el||e.error("EventBus initialized without el"),this.$el=e(t.el)}var i,r;return i="typeahead:",r={render:"rendered",cursorchange:"cursorchanged",select:"selected",autocomplete:"autocompleted"},t.mixin(n.prototype,{_trigger:function(t,r){var n;return n=e.Event(i+t),(r=r||[]).unshift(n),this.$el.trigger.apply(this.$el,r),n},before:function(e){var t,i;return t=[].slice.call(arguments,1),i=this._trigger("before"+e,t),i.isDefaultPrevented()},trigger:function(e){var t;this._trigger(e,[].slice.call(arguments,1)),(t=r[e])&&this._trigger(t,[].slice.call(arguments,1))}}),n}(),n=function(){"use strict";function i(t,i,r,n){var a;if(!r)return this;for(i=i.split(e),r=n?u(r,n):r,this._callbacks=this._callbacks||{};a=i.shift();)this._callbacks[a]=this._callbacks[a]||{sync:[],async:[]},this._callbacks[a][t].push(r);return this}function r(e,t,r){return i.call(this,"async",e,t,r)}function n(e,t,r){return i.call(this,"sync",e,t,r)}function a(t){var i;if(!this._callbacks)return this;for(t=t.split(e);i=t.shift();)delete this._callbacks[i];return this}function o(i){var r,n,a,o,s;if(!this._callbacks)return this;for(i=i.split(e),a=[].slice.call(arguments,1);(r=i.shift())&&(n=this._callbacks[r]);)o=l(n.sync,this,[r].concat(a)),s=l(n.async,this,[r].concat(a)),o()&&t(s);return this}function l(e,t,i){function r(){for(var r,n=0,a=e.length;!r&&a>n;n+=1)r=e[n].apply(t,i)===!1;return!r}return r}function s(){var e;return e=window.setImmediate?function(e){setImmediate(function(){e()})}:function(e){setTimeout(function(){e()},0)}}function u(e,t){return e.bind?e.bind(t):function(){e.apply(t,[].slice.call(arguments,0))}}var e=/\s+/,t=s();return{onSync:n,onAsync:r,off:a,trigger:o}}(),a=function(e){"use strict";function r(e,i,r){for(var a,n=[],o=0,l=e.length;l>o;o++)n.push(t.escapeRegExChars(e[o]));return a=r?"\\b("+n.join("|")+")\\b":"("+n.join("|")+")",i?new RegExp(a):new RegExp(a,"i")}var i={node:null,pattern:null,tagName:"strong",className:null,wordsOnly:!1,caseSensitive:!1};return function(n){function o(t){var i,r,o;return(i=a.exec(t.data))&&(o=e.createElement(n.tagName),n.className&&(o.className=n.className),r=t.splitText(i.index),r.splitText(i[0].length),o.appendChild(r.cloneNode(!0)),t.parentNode.replaceChild(o,r)),!!i}function l(e,t){for(var i,r=3,n=0;n<e.childNodes.length;n++)i=e.childNodes[n],i.nodeType===r?n+=t(i)?1:0:l(i,t)}var a;n=t.mixin({},i,n),n.node&&n.pattern&&(n.pattern=t.isArray(n.pattern)?n.pattern:[n.pattern],a=r(n.pattern,n.caseSensitive,n.wordsOnly),l(n.node,o))}}(window.document),o=function(){"use strict";function r(i,r){i=i||{},i.input||e.error("input is missing"),r.mixin(this),this.$hint=e(i.hint),this.$input=e(i.input),this.query=this.$input.val(),this.queryWhenFocused=this.hasFocus()?this.query:null,this.$overflowHelper=a(this.$input),this._checkLanguageDirection(),0===this.$hint.length&&(this.setHint=this.getHint=this.clearHint=this.clearHintIfInvalid=t.noop)}function a(t){return e('<pre aria-hidden="true"></pre>').css({position:"absolute",visibility:"hidden",whiteSpace:"pre",fontFamily:t.css("font-family"),fontSize:t.css("font-size"),fontStyle:t.css("font-style"),fontVariant:t.css("font-variant"),fontWeight:t.css("font-weight"),wordSpacing:t.css("word-spacing"),letterSpacing:t.css("letter-spacing"),textIndent:t.css("text-indent"),textRendering:t.css("text-rendering"),textTransform:t.css("text-transform")}).insertAfter(t)}function o(e,t){return r.normalizeQuery(e)===r.normalizeQuery(t)}function l(e){return e.altKey||e.ctrlKey||e.metaKey||e.shiftKey}var i;return i={9:"tab",27:"esc",37:"left",39:"right",13:"enter",38:"up",40:"down"},r.normalizeQuery=function(e){return t.toStr(e).replace(/^\s*/g,"").replace(/\s{2,}/g," ")},t.mixin(r.prototype,n,{_onBlur:function(){this.resetInputValue(),this.trigger("blurred")},_onFocus:function(){this.queryWhenFocused=this.query,this.trigger("focused")},_onKeydown:function(e){var t=i[e.which||e.keyCode];this._managePreventDefault(t,e),t&&this._shouldTrigger(t,e)&&this.trigger(t+"Keyed",e)},_onInput:function(){this._setQuery(this.getInputValue()),this.clearHintIfInvalid(),this._checkLanguageDirection()},_managePreventDefault:function(e,t){var i;switch(e){case"up":case"down":i=!l(t);break;default:i=!1}i&&t.preventDefault()},_shouldTrigger:function(e,t){var i;switch(e){case"tab":i=!l(t);break;default:i=!0}return i},_checkLanguageDirection:function(){var e=(this.$input.css("direction")||"ltr").toLowerCase();this.dir!==e&&(this.dir=e,this.$hint.attr("dir",e),this.trigger("langDirChanged",e))},_setQuery:function(e,t){var i,r;i=o(e,this.query),r=i?this.query.length!==e.length:!1,this.query=e,t||i?!t&&r&&this.trigger("whitespaceChanged",this.query):this.trigger("queryChanged",this.query)},bind:function(){var r,n,a,o,e=this;return r=t.bind(this._onBlur,this),n=t.bind(this._onFocus,this),a=t.bind(this._onKeydown,this),o=t.bind(this._onInput,this),this.$input.on("blur.tt",r).on("focus.tt",n).on("keydown.tt",a),!t.isMsie()||t.isMsie()>9?this.$input.on("input.tt",o):this.$input.on("keydown.tt keypress.tt cut.tt paste.tt",function(r){i[r.which||r.keyCode]||t.defer(t.bind(e._onInput,e,r))}),this},focus:function(){this.$input.focus()},blur:function(){this.$input.blur()},getLangDir:function(){return this.dir},getQuery:function(){return this.query||""},setQuery:function(e,t){this.setInputValue(e),this._setQuery(e,t)},hasQueryChangedSinceLastFocus:function(){return this.query!==this.queryWhenFocused},getInputValue:function(){return this.$input.val()},setInputValue:function(e){this.$input.val(e),this.clearHintIfInvalid(),this._checkLanguageDirection()},resetInputValue:function(){this.setInputValue(this.query)},getHint:function(){return this.$hint.val()},setHint:function(e){this.$hint.val(e)},clearHint:function(){this.setHint("")},clearHintIfInvalid:function(){var e,t,i,r;e=this.getInputValue(),t=this.getHint(),i=e!==t&&0===t.indexOf(e),r=""!==e&&i&&!this.hasOverflow(),!r&&this.clearHint()},hasFocus:function(){return this.$input.is(":focus")},hasOverflow:function(){var e=this.$input.width()-2;return this.$overflowHelper.text(this.getInputValue()),this.$overflowHelper.width()>=e},isCursorAtEnd:function(){var e,i,r;return e=this.$input.val().length,i=this.$input[0].selectionStart,t.isNumber(i)?i===e:document.selection?(r=document.selection.createRange(),r.moveStart("character",-e),e===r.text.length):!0},destroy:function(){this.$hint.off(".tt"),this.$input.off(".tt"),this.$overflowHelper.remove(),this.$hint=this.$input=this.$overflowHelper=e("<div>")}}),r}(),l=function(){"use strict";function o(i,n){i=i||{},i.templates=i.templates||{},i.templates.notFound=i.templates.notFound||i.templates.empty,i.source||e.error("missing source"),i.node||e.error("missing node"),i.name&&!u(i.name)&&e.error("invalid dataset name: "+i.name),n.mixin(this),this.highlight=!!i.highlight,this.name=i.name||r(),this.limit=i.limit||5,this.displayFn=l(i.display||i.displayKey),this.templates=s(i.templates,this.displayFn),this.source=i.source.__ttAdapter?i.source.__ttAdapter():i.source,this.async=t.isUndefined(i.async)?this.source.length>2:!!i.async,this._resetLastSuggestion(),this.$el=e(i.node).addClass(this.classes.dataset).addClass(this.classes.dataset+"-"+this.name)}function l(e){function i(t){return t[e]}return e=e||t.stringify,t.isFunction(e)?e:i}function s(i,r){function n(t){return e("<div>").text(r(t))}return{notFound:i.notFound&&t.templatify(i.notFound),pending:i.pending&&t.templatify(i.pending),header:i.header&&t.templatify(i.header),footer:i.footer&&t.templatify(i.footer),suggestion:i.suggestion||n}}function u(e){return/^[_a-zA-Z0-9-]+$/.test(e)}var i,r;return i={val:"tt-selectable-display",obj:"tt-selectable-object"},r=t.getIdGenerator(),o.extractData=function(t){var r=e(t);return r.data(i.obj)?{val:r.data(i.val)||"",obj:r.data(i.obj)||null}:null},t.mixin(o.prototype,n,{_overwrite:function(e,t){t=t||[],t.length?this._renderSuggestions(e,t):this.async&&this.templates.pending?this._renderPending(e):!this.async&&this.templates.notFound?this._renderNotFound(e):this._empty(),this.trigger("rendered",this.name,t,!1)},_append:function(e,t){t=t||[],t.length&&this.$lastSuggestion.length?this._appendSuggestions(e,t):t.length?this._renderSuggestions(e,t):!this.$lastSuggestion.length&&this.templates.notFound&&this._renderNotFound(e),this.trigger("rendered",this.name,t,!0)},_renderSuggestions:function(e,t){var i;i=this._getSuggestionsFragment(e,t),this.$lastSuggestion=i.children().last(),this.$el.html(i).prepend(this._getHeader(e,t)).append(this._getFooter(e,t))},_appendSuggestions:function(e,t){var i,r;i=this._getSuggestionsFragment(e,t),r=i.children().last(),this.$lastSuggestion.after(i),this.$lastSuggestion=r},_renderPending:function(e){var t=this.templates.pending;this._resetLastSuggestion(),t&&this.$el.html(t({query:e,dataset:this.name}))},_renderNotFound:function(e){var t=this.templates.notFound;this._resetLastSuggestion(),t&&this.$el.html(t({query:e,dataset:this.name}))},_empty:function(){this.$el.empty(),this._resetLastSuggestion()},_getSuggestionsFragment:function(r,n){var l,o=this;return l=document.createDocumentFragment(),t.each(n,function(t){var n,a;a=o._injectQuery(r,t),n=e(o.templates.suggestion(a)).data(i.obj,t).data(i.val,o.displayFn(t)).addClass(o.classes.suggestion+" "+o.classes.selectable),l.appendChild(n[0])}),this.highlight&&a({className:this.classes.highlight,node:l,pattern:r}),e(l)},_getFooter:function(e,t){return this.templates.footer?this.templates.footer({query:e,suggestions:t,dataset:this.name}):null},_getHeader:function(e,t){return this.templates.header?this.templates.header({query:e,suggestions:t,dataset:this.name}):null},_resetLastSuggestion:function(){this.$lastSuggestion=e()},_injectQuery:function(e,i){return t.isObject(i)?t.mixin({_query:e},i):i},update:function(t){function o(e){n||(n=!0,e=(e||[]).slice(0,i.limit),a=e.length,i._overwrite(t,e),a<i.limit&&i.async&&i.trigger("asyncRequested",t))}function l(n){n=n||[],!r&&a<i.limit&&(i.cancel=e.noop,a+=n.length,i._append(t,n.slice(0,i.limit-a)),i.async&&i.trigger("asyncReceived",t))}var i=this,r=!1,n=!1,a=0;this.cancel(),this.cancel=function(){r=!0,i.cancel=e.noop,i.async&&i.trigger("asyncCanceled",t)},this.source(t,o,l),!n&&o([])},cancel:e.noop,clear:function(){this._empty(),this.cancel(),this.trigger("cleared")},isEmpty:function(){return this.$el.is(":empty")},destroy:function(){this.$el=e("<div>")}}),o}(),s=function(){"use strict";function i(i,r){function a(t){var i=n.$node.find(t.node).first();return t.node=i.length?i:e("<div>").appendTo(n.$node),new l(t,r)}var n=this;i=i||{},i.node||e.error("node is required"),r.mixin(this),this.$node=e(i.node),this.query=null,this.datasets=t.map(i.datasets,a)}return t.mixin(i.prototype,n,{_onSelectableClick:function(t){this.trigger("selectableClicked",e(t.currentTarget))},_onRendered:function(e,t,i,r){this.$node.toggleClass(this.classes.empty,this._allDatasetsEmpty()),this.trigger("datasetRendered",t,i,r)},_onCleared:function(){this.$node.toggleClass(this.classes.empty,this._allDatasetsEmpty()),this.trigger("datasetCleared")},_propagate:function(){this.trigger.apply(this,arguments)},_allDatasetsEmpty:function(){function e(e){return e.isEmpty()}return t.every(this.datasets,e)},_getSelectables:function(){return this.$node.find(this.selectors.selectable)},_removeCursor:function(){var e=this.getActiveSelectable();e&&e.removeClass(this.classes.cursor)},_ensureVisible:function(e){var t,i,r,n;t=e.position().top,i=t+e.outerHeight(!0),r=this.$node.scrollTop(),n=this.$node.height()+parseInt(this.$node.css("paddingTop"),10)+parseInt(this.$node.css("paddingBottom"),10),0>t?this.$node.scrollTop(r+t):i>n&&this.$node.scrollTop(r+(i-n))},bind:function(){var i,e=this;return i=t.bind(this._onSelectableClick,this),this.$node.on("click.tt",this.selectors.selectable,i),t.each(this.datasets,function(t){t.onSync("asyncRequested",e._propagate,e).onSync("asyncCanceled",e._propagate,e).onSync("asyncReceived",e._propagate,e).onSync("rendered",e._onRendered,e).onSync("cleared",e._onCleared,e)}),this},isOpen:function(){return this.$node.hasClass(this.classes.open)},open:function(){this.$node.addClass(this.classes.open)},close:function(){this.$node.removeClass(this.classes.open),this._removeCursor()},setLanguageDirection:function(e){this.$node.attr("dir",e)},selectableRelativeToCursor:function(e){var t,i,r,n;return i=this.getActiveSelectable(),t=this._getSelectables(),r=i?t.index(i):-1,n=r+e,n=(n+1)%(t.length+1)-1,n=-1>n?t.length-1:n,-1===n?null:t.eq(n)},setCursor:function(e){this._removeCursor(),(e=e&&e.first())&&(e.addClass(this.classes.cursor),this._ensureVisible(e))},getSelectableData:function(e){return e&&e.length?l.extractData(e):null},getActiveSelectable:function(){var e=this._getSelectables().filter(this.selectors.cursor).first();return e.length?e:null},getTopSelectable:function(){var e=this._getSelectables().first();return e.length?e:null},update:function(e){function r(t){t.update(e)}var i=e!==this.query;return i&&(this.query=e,t.each(this.datasets,r)),i},empty:function(){function e(e){e.clear()}t.each(this.datasets,e),this.query=null,this.$node.addClass(this.classes.empty)},destroy:function(){function i(e){e.destroy()}this.$node.off(".tt"),this.$node=e("<div>"),t.each(this.datasets,i)}}),i}(),u=function(){"use strict";function i(){s.apply(this,[].slice.call(arguments,0))}var e=s.prototype;return t.mixin(i.prototype,s.prototype,{open:function(){return!this._allDatasetsEmpty()&&this._show(),e.open.apply(this,[].slice.call(arguments,0))},close:function(){return this._hide(),e.close.apply(this,[].slice.call(arguments,0))},_onRendered:function(){return this._allDatasetsEmpty()?this._hide():this.isOpen()&&this._show(),e._onRendered.apply(this,[].slice.call(arguments,0))},_onCleared:function(){return this._allDatasetsEmpty()?this._hide():this.isOpen()&&this._show(),e._onCleared.apply(this,[].slice.call(arguments,0))},setLanguageDirection:function(t){return this.$node.css("ltr"===t?this.css.ltr:this.css.rtl),e.setLanguageDirection.apply(this,[].slice.call(arguments,0))},_hide:function(){this.$node.hide()},_show:function(){this.$node.css("display","block")}}),i}(),c=function(){"use strict";function i(i,n){var a,o,l,s,u,c,f,d,h,p,m;i=i||{},i.input||e.error("missing input"),i.menu||e.error("missing menu"),i.eventBus||e.error("missing event bus"),n.mixin(this),this.eventBus=i.eventBus,this.minLength=t.isNumber(i.minLength)?i.minLength:1,this.input=i.input,this.menu=i.menu,this.enabled=!0,this.active=!1,this.input.hasFocus()&&this.activate(),this.dir=this.input.getLangDir(),this._hacks(),this.menu.bind().onSync("selectableClicked",this._onSelectableClicked,this).onSync("asyncRequested",this._onAsyncRequested,this).onSync("asyncCanceled",this._onAsyncCanceled,this).onSync("asyncReceived",this._onAsyncReceived,this).onSync("datasetRendered",this._onDatasetRendered,this).onSync("datasetCleared",this._onDatasetCleared,this),a=r(this,"activate","open","_onFocused"),o=r(this,"deactivate","_onBlurred"),l=r(this,"isActive","isOpen","_onEnterKeyed"),s=r(this,"isActive","isOpen","_onTabKeyed"),u=r(this,"isActive","_onEscKeyed"),c=r(this,"isActive","open","_onUpKeyed"),f=r(this,"isActive","open","_onDownKeyed"),d=r(this,"isActive","isOpen","_onLeftKeyed"),h=r(this,"isActive","isOpen","_onRightKeyed"),p=r(this,"_openIfActive","_onQueryChanged"),m=r(this,"_openIfActive","_onWhitespaceChanged"),this.input.bind().onSync("focused",a,this).onSync("blurred",o,this).onSync("enterKeyed",l,this).onSync("tabKeyed",s,this).onSync("escKeyed",u,this).onSync("upKeyed",c,this).onSync("downKeyed",f,this).onSync("leftKeyed",d,this).onSync("rightKeyed",h,this).onSync("queryChanged",p,this).onSync("whitespaceChanged",m,this).onSync("langDirChanged",this._onLangDirChanged,this)}function r(e){var i=[].slice.call(arguments,1);return function(){var r=[].slice.call(arguments);t.each(i,function(t){return e[t].apply(e,r)})}}return t.mixin(i.prototype,{_hacks:function(){var i,r;i=this.input.$input||e("<div>"),r=this.menu.$node||e("<div>"),i.on("blur.tt",function(e){var n,a,o;n=document.activeElement,a=r.is(n),o=r.has(n).length>0,t.isMsie()&&(a||o)&&(e.preventDefault(),e.stopImmediatePropagation(),t.defer(function(){i.focus()}))}),r.on("mousedown.tt",function(e){e.preventDefault()})},_onSelectableClicked:function(e,t){this.select(t)},_onDatasetCleared:function(){this._updateHint()},_onDatasetRendered:function(e,t,i,r){this._updateHint(),this.eventBus.trigger("render",i,r,t)},_onAsyncRequested:function(e,t,i){this.eventBus.trigger("asyncrequest",i,t)},_onAsyncCanceled:function(e,t,i){this.eventBus.trigger("asynccancel",i,t)},_onAsyncReceived:function(e,t,i){this.eventBus.trigger("asyncreceive",i,t)},_onFocused:function(){this._minLengthMet()&&this.menu.update(this.input.getQuery())},_onBlurred:function(){this.input.hasQueryChangedSinceLastFocus()&&this.eventBus.trigger("change",this.input.getQuery())},_onEnterKeyed:function(e,t){var i;(i=this.menu.getActiveSelectable())&&this.select(i)&&t.preventDefault()},_onTabKeyed:function(e,t){var i;(i=this.menu.getActiveSelectable())?this.select(i)&&t.preventDefault():(i=this.menu.getTopSelectable())&&this.autocomplete(i)&&t.preventDefault()},_onEscKeyed:function(){this.close()},_onUpKeyed:function(){this.moveCursor(-1)},_onDownKeyed:function(){this.moveCursor(1)},_onLeftKeyed:function(){"rtl"===this.dir&&this.input.isCursorAtEnd()&&this.autocomplete(this.menu.getTopSelectable())},_onRightKeyed:function(){"ltr"===this.dir&&this.input.isCursorAtEnd()&&this.autocomplete(this.menu.getTopSelectable())},_onQueryChanged:function(e,t){this._minLengthMet(t)?this.menu.update(t):this.menu.empty()},_onWhitespaceChanged:function(){this._updateHint()},_onLangDirChanged:function(e,t){this.dir!==t&&(this.dir=t,this.menu.setLanguageDirection(t))},_openIfActive:function(){this.isActive()&&this.open()},_minLengthMet:function(e){return e=t.isString(e)?e:this.input.getQuery()||"",e.length>=this.minLength},_updateHint:function(){var e,i,r,n,a,l,s;e=this.menu.getTopSelectable(),i=this.menu.getSelectableData(e),r=this.input.getInputValue(),!i||t.isBlankString(r)||this.input.hasOverflow()?this.input.clearHint():(n=o.normalizeQuery(r),a=t.escapeRegExChars(n),l=new RegExp("^(?:"+a+")(.+$)","i"),s=l.exec(i.val),s&&this.input.setHint(r+s[1]))},isEnabled:function(){return this.enabled},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},isActive:function(){return this.active},activate:function(){return this.isActive()?!0:!this.isEnabled()||this.eventBus.before("active")?!1:(this.active=!0,this.eventBus.trigger("active"),!0)},deactivate:function(){return this.isActive()?this.eventBus.before("idle")?!1:(this.active=!1,this.close(),this.eventBus.trigger("idle"),!0):!0},isOpen:function(){return this.menu.isOpen()},open:function(){return this.isOpen()||this.eventBus.before("open")||(this.menu.open(),this._updateHint(),this.eventBus.trigger("open")),this.isOpen()},close:function(){return this.isOpen()&&!this.eventBus.before("close")&&(this.menu.close(),this.input.clearHint(),this.input.resetInputValue(),this.eventBus.trigger("close")),!this.isOpen()},setVal:function(e){this.input.setQuery(t.toStr(e))},getVal:function(){return this.input.getQuery()},select:function(e){var t=this.menu.getSelectableData(e);return t&&!this.eventBus.before("select",t.obj)?(this.input.setQuery(t.val,!0),this.eventBus.trigger("select",t.obj),this.close(),!0):!1},autocomplete:function(e){var t,i,r;return t=this.input.getQuery(),i=this.menu.getSelectableData(e),r=i&&t!==i.val,r&&!this.eventBus.before("autocomplete",i.obj)?(this.input.setQuery(i.val),this.eventBus.trigger("autocomplete",i.obj),!0):!1},moveCursor:function(e){var t,i,r,n,a;return t=this.input.getQuery(),i=this.menu.selectableRelativeToCursor(e),r=this.menu.getSelectableData(i),n=r?r.obj:null,a=this._minLengthMet()&&this.menu.update(t),a||this.eventBus.before("cursorchange",n)?!1:(this.menu.setCursor(i),r?this.input.setInputValue(r.val):(this.input.resetInputValue(),this._updateHint()),this.eventBus.trigger("cursorchange",n),!0)},destroy:function(){this.input.destroy(),this.menu.destroy()}}),i}();!function(){"use strict";function f(t,i){t.each(function(){var r,t=e(this);(r=t.data(a.typeahead))&&i(r,t)})}function d(e,t){return e.clone().addClass(t.classes.hint).removeData().css(t.css.hint).css(p(e)).prop("readonly",!0).removeAttr("id name placeholder required").attr({autocomplete:"off",spellcheck:"false",tabindex:-1})}function h(e,t){e.data(a.attrs,{dir:e.attr("dir"),autocomplete:e.attr("autocomplete"),spellcheck:e.attr("spellcheck"),style:e.attr("style")}),e.addClass(t.classes.input).attr({autocomplete:"off",spellcheck:!1});try{!e.attr("dir")&&e.attr("dir","auto")}catch(i){}return e}function p(e){return{backgroundAttachment:e.css("background-attachment"),backgroundClip:e.css("background-clip"),backgroundColor:e.css("background-color"),backgroundImage:e.css("background-image"),backgroundOrigin:e.css("background-origin"),backgroundPosition:e.css("background-position"),backgroundRepeat:e.css("background-repeat"),backgroundSize:e.css("background-size")}}function m(e){var i,r;i=e.data(a.www),r=e.parent().filter(i.selectors.wrapper),t.each(e.data(a.attrs),function(i,r){t.isUndefined(i)?e.removeAttr(r):e.attr(r,i)}),e.removeData(a.typeahead).removeData(a.www).removeData(a.attr).removeClass(i.classes.input),r.length&&(e.detach().insertAfter(r),r.remove())}function g(i){var r,n;return r=t.isJQuery(i)||t.isElement(i),n=r?e(i).first():[],n.length?n:null}var n,a,l;n=e.fn.typeahead,a={www:"tt-www",attrs:"tt-attrs",typeahead:"tt-typeahead"},l={initialize:function(n,l){function p(){var i,p,m,v,y,b,x,w,k,_,S;t.each(l,function(e){e.highlight=!!n.highlight}),i=e(this),p=e(f.html.wrapper),m=g(n.hint),v=g(n.menu),y=n.hint!==!1&&!m,b=n.menu!==!1&&!v,y&&(m=d(i,f)),b&&(v=e(f.html.menu).css(f.css.menu)),m&&m.val(""),i=h(i,f),(y||b)&&(p.css(f.css.wrapper),i.css(y?f.css.input:f.css.inputWithNoHint),i.wrap(p).parent().prepend(y?m:null).append(b?v:null)),S=b?u:s,x=new r({el:i}),w=new o({hint:m,input:i},f),k=new S({node:v,datasets:l},f),_=new c({input:w,menu:k,eventBus:x,minLength:n.minLength},f),i.data(a.www,f),i.data(a.typeahead,_)}var f;return l=t.isArray(l)?l:[].slice.call(arguments,1),n=n||{},f=i(n.classNames),this.each(p)},isEnabled:function(){var e;return f(this.first(),function(t){e=t.isEnabled()}),e},enable:function(){return f(this,function(e){e.enable()}),this},disable:function(){return f(this,function(e){e.disable()}),this},isActive:function(){var e;return f(this.first(),function(t){e=t.isActive()}),e},activate:function(){return f(this,function(e){e.activate()}),this},deactivate:function(){return f(this,function(e){e.deactivate()}),this},isOpen:function(){var e;return f(this.first(),function(t){e=t.isOpen()}),e},open:function(){return f(this,function(e){e.open()}),this},close:function(){return f(this,function(e){e.close()}),this},select:function(t){var i=!1,r=e(t);return f(this.first(),function(e){i=e.select(r)}),i},autocomplete:function(t){var i=!1,r=e(t);return f(this.first(),function(e){i=e.autocomplete(r)}),i},moveCursor:function(e){var t=!1;return f(this.first(),function(i){t=i.moveCursor(e)}),t},val:function(e){var t;return arguments.length?(f(this,function(t){t.setVal(e)}),this):(f(this.first(),function(e){t=e.getVal()}),t)},destroy:function(){return f(this,function(e,t){m(t),e.destroy()}),this}},e.fn.typeahead=function(e){return l[e]?l[e].apply(this,[].slice.call(arguments,1)):l.initialize.apply(this,arguments)},e.fn.typeahead.noConflict=function(){return e.fn.typeahead=n,this}}()});
